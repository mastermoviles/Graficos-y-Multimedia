
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="formatos.html">
      
      
        <link rel="next" href="unity.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Difusión de medios - Gráficos y Multimedia</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="Indigo" data-md-color-accent="Indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sistemas-de-difusion-de-medios" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="index.html" title="Gráficos y Multimedia" class="md-header__button md-logo" aria-label="Gráficos y Multimedia" data-md-component="logo">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gráficos y Multimedia
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Difusión de medios
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Gráficos y Multimedia" class="md-nav__button md-logo" aria-label="Gráficos y Multimedia" data-md-component="logo">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    Gráficos y Multimedia
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Introducción
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="formatos.html" class="md-nav__link">
        Formatos de audio y vídeo
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Difusión de medios
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="streaming.html" class="md-nav__link md-nav__link--active">
        Difusión de medios
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#podcast" class="md-nav__link">
    Podcast
  </a>
  
    <nav class="md-nav" aria-label="Podcast">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formatos-de-un-podcast" class="md-nav__link">
    Formatos de un podcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-un-podcast" class="md-nav__link">
    Creación de un podcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscripcion-a-un-podcast" class="md-nav__link">
    Subscripción a un podcast
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#descarga-progresiva" class="md-nav__link">
    Descarga progresiva
  </a>
  
    <nav class="md-nav" aria-label="Descarga progresiva">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atomos-del-fichero-de-video" class="md-nav__link">
    Átomos del fichero de vídeo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faststart" class="md-nav__link">
    Faststart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#desventajas-de-la-descarga-progresiva" class="md-nav__link">
    Desventajas de la descarga progresiva
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streaming" class="md-nav__link">
    Streaming
  </a>
  
    <nav class="md-nav" aria-label="Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protocolos-de-streaming" class="md-nav__link">
    Protocolos de streaming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-live-streaming" class="md-nav__link">
    HTTP Live Streaming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formato-de-video-en-hls" class="md-nav__link">
    Formato de vídeo en HLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generacion-de-hls-con-ffmpeg" class="md-nav__link">
    Generación de HLS con ffmpeg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitrate-adaptativo-abr" class="md-nav__link">
    Bitrate adaptativo (ABR)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servidores-de-streaming" class="md-nav__link">
    Servidores de streaming
  </a>
  
    <nav class="md-nav" aria-label="Servidores de streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion-de-wowza-media-server" class="md-nav__link">
    Configuración de Wowza Media Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publicacion-de-contenido-vod" class="md-nav__link">
    Publicación de contenido VOD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acceso-a-wowza-mediante-ssl" class="md-nav__link">
    Acceso a Wowza mediante SSL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    Ejercicios
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-e-un-podcast" class="md-nav__link">
    Creación e un podcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-faststart" class="md-nav__link">
    Prueba de faststart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="unity.html" class="md-nav__link">
        El motor Unity
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="graficos-android.html" class="md-nav__link">
        Gráficos de alto rendimiento en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="graficos-ios.html" class="md-nav__link">
        Gráficos en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="reproduccion-ios.html" class="md-nav__link">
        Reproducción de medios en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="captura-ios.html" class="md-nav__link">
        Captura y procesamiento de medios en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="procesamiento-de-imagen-en-ios-opencv.html" class="md-nav__link">
        Procesamiento de imágenes en iOS - OpenCV
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="reproduccion-android.html" class="md-nav__link">
        Reproducción de medios en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="captura-android.html" class="md-nav__link">
        Captura de medios en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="procesamiento-android.html" class="md-nav__link">
        Emisión de medios
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="mirroring.html" class="md-nav__link">
        Reproducción en dispositivos externos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="adobe-air.html" class="md-nav__link">
        Aplicaciones Adobe Air
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="habla-android.html" class="md-nav__link">
        Síntesis y reconocimiento del habla
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#podcast" class="md-nav__link">
    Podcast
  </a>
  
    <nav class="md-nav" aria-label="Podcast">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formatos-de-un-podcast" class="md-nav__link">
    Formatos de un podcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-un-podcast" class="md-nav__link">
    Creación de un podcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscripcion-a-un-podcast" class="md-nav__link">
    Subscripción a un podcast
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#descarga-progresiva" class="md-nav__link">
    Descarga progresiva
  </a>
  
    <nav class="md-nav" aria-label="Descarga progresiva">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atomos-del-fichero-de-video" class="md-nav__link">
    Átomos del fichero de vídeo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faststart" class="md-nav__link">
    Faststart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#desventajas-de-la-descarga-progresiva" class="md-nav__link">
    Desventajas de la descarga progresiva
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streaming" class="md-nav__link">
    Streaming
  </a>
  
    <nav class="md-nav" aria-label="Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protocolos-de-streaming" class="md-nav__link">
    Protocolos de streaming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-live-streaming" class="md-nav__link">
    HTTP Live Streaming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formato-de-video-en-hls" class="md-nav__link">
    Formato de vídeo en HLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generacion-de-hls-con-ffmpeg" class="md-nav__link">
    Generación de HLS con ffmpeg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitrate-adaptativo-abr" class="md-nav__link">
    Bitrate adaptativo (ABR)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servidores-de-streaming" class="md-nav__link">
    Servidores de streaming
  </a>
  
    <nav class="md-nav" aria-label="Servidores de streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion-de-wowza-media-server" class="md-nav__link">
    Configuración de Wowza Media Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publicacion-de-contenido-vod" class="md-nav__link">
    Publicación de contenido VOD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acceso-a-wowza-mediante-ssl" class="md-nav__link">
    Acceso a Wowza mediante SSL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    Ejercicios
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-e-un-podcast" class="md-nav__link">
    Creación e un podcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-faststart" class="md-nav__link">
    Prueba de faststart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="sistemas-de-difusion-de-medios">Sistemas de difusión de medios<a class="headerlink" href="#sistemas-de-difusion-de-medios" title="Permanent link">&para;</a></h1>
<p>En los dispositivos móviles podemos reproducir tanto medios almacenados localmente en el dispositivos, como medios a los que accedemos de forma remota. Para tener vídeo local podemos copiarlo directamente al espacio de almacenamiento del dispositivo o bien distribuirlo junto con nuestras aplicaciones. Esto puede ser conveniente para vídeos de escaso tamaño que no van a cambiar a lo largo del tiempo, pero en el resto de casos será más apropiado contar con sistemas que suministren de forma remota estos contenidos multimedia a nuestros dispositivos. Vamos a estudiar los siguientes mecanismos:</p>
<ul>
<li><em>Podcasts</em></li>
<li>Descarga progresiva</li>
<li><em>Streaming</em></li>
</ul>
<h2 id="podcast"><em>Podcast</em><a class="headerlink" href="#podcast" title="Permanent link">&para;</a></h2>
<p>Los <em>podcasts</em> surgieron como el mecanismo de difusión de medios para el iPod. De hecho, su nombre viene de iPod + <em>broadcast</em>.</p>
<p>Un <em>podcast</em> se define como un canal que contiene contenido episódico multimedia. Estos episodios pueden ser audios, vídeos, o incluso libros. El creados del <em>podcast</em> podrá añadir nuevos episodios al canal en cualquier momento.</p>
<p>Como usuarios podemos suscribirnos a un <em>podcast</em> en nuestros dispositivos. Esto hará que cuando se publique un nuevo episodio éste se descargue de forma automática en nuestro dispositivo en el momento que el que contemos con una conexión Wi-Fi o por cable. De esta forma podremos reproducirlo <em>offline</em> posteriormente, sin necesidad de consumir datos móviles.</p>
<h3 id="formatos-de-un-podcast">Formatos de un <em>podcast</em><a class="headerlink" href="#formatos-de-un-podcast" title="Permanent link">&para;</a></h3>
<p>En un <em>podcast</em> podemos publicar medios en diferentes formatos. En el caso del audio los formatos soportados son:</p>
<ul>
<li><code>.m4a</code>  (audio/x-m4a)</li>
<li><code>.mp3</code>  (audio/mpeg)</li>
</ul>
<p>Para el vídeo tenemos:</p>
<ul>
<li><code>.mov</code>  (video/quicktime)</li>
<li><code>.mp4</code>  (video/mp4)</li>
<li><code>.m4v</code>  (video/x-m4v)</li>
</ul>
<p>Y por último, en el caso de libros y documentos encontramos:</p>
<ul>
<li><code>.pdf</code>  (application/pdf)</li>
<li><code>.epub</code> (document/x-epub)</li>
</ul>
<h3 id="creacion-de-un-podcast">Creación de un <em>podcast</em><a class="headerlink" href="#creacion-de-un-podcast" title="Permanent link">&para;</a></h3>
<p>Un <em>podcast</em> se define como un fichero XML con formato de <em>feed</em> RSS. En este fichero la etiqueta principal es <code>&lt;channel&gt;</code>, que define el propio canal del <em>podcast</em>. Dentro de esta etiqueta tendremos información general sobre el canal, y contendrá un conjunto de episodios, cada uno de ellos definido mediante la etiqueta <code>&lt;item&gt;</code>:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;rss</span><span class="w"> </span><span class="na">xmlns:itunes=</span><span class="s">&quot;http://www.itunes.com/dtds/podcast-1.0.dtd&quot;</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;channel&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Informacion del canal --&gt;</span>
<span class="w">    </span><span class="nt">&lt;item&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Informacion del item --&gt;</span>
<span class="w">    </span><span class="nt">&lt;/item&gt;</span>
<span class="w">    </span><span class="nt">&lt;item&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Informacion del item --&gt;</span>
<span class="w">    </span><span class="nt">&lt;/item&gt;</span>
<span class="w">    </span>...
<span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span>
</code></pre></div>
<p>La información general que debemos proporcional del canal es la siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nt">&lt;title&gt;</span>Servicios<span class="w"> </span>Multimedia<span class="w"> </span>para<span class="w"> </span>Dispositivos<span class="w"> </span>Móviles<span class="nt">&lt;/title&gt;</span>
<span class="w">    </span><span class="nt">&lt;link&gt;</span>http://jtech.ua.es/podcast/index.html<span class="nt">&lt;/link&gt;</span>
<span class="w">    </span><span class="nt">&lt;language&gt;</span>en-us<span class="nt">&lt;/language&gt;</span>
<span class="w">    </span><span class="nt">&lt;copyright&gt;</span><span class="ni">&amp;#x2117;</span><span class="w"> </span><span class="ni">&amp;amp;</span><span class="w"> </span><span class="ni">&amp;#xA9;</span><span class="w"> </span>2012<span class="w"> </span>Miguel<span class="w"> </span>Ángel<span class="w"> </span>Lozano<span class="nt">&lt;/copyright&gt;</span>
<span class="w">    </span><span class="nt">&lt;itunes:subtitle&gt;</span>Podcast<span class="w"> </span>sobre<span class="w"> </span>dispositivos<span class="w"> </span>móviles<span class="nt">&lt;/itunes:subtitle&gt;</span>
<span class="w">    </span><span class="nt">&lt;itunes:author&gt;</span>Miguel<span class="w"> </span>Ángel<span class="w"> </span>Lozano<span class="nt">&lt;/itunes:author&gt;</span>
<span class="w">    </span><span class="nt">&lt;itunes:summary&gt;</span>Resumen<span class="nt">&lt;/itunes:summary&gt;</span>
<span class="w">    </span><span class="nt">&lt;description&gt;</span>Descripción<span class="nt">&lt;/description&gt;</span>
<span class="w">    </span><span class="nt">&lt;itunes:owner&gt;</span>
<span class="w">        </span><span class="nt">&lt;itunes:name&gt;</span>Miguel<span class="w"> </span>Ángel<span class="w"> </span>Lozano<span class="nt">&lt;/itunes:name&gt;</span>
<span class="w">        </span><span class="nt">&lt;itunes:email&gt;</span>malozano@ua.es<span class="nt">&lt;/itunes:email&gt;</span>
<span class="w">    </span><span class="nt">&lt;/itunes:owner&gt;</span>
<span class="w">    </span><span class="nt">&lt;itunes:image</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;http://jtech.ua.es/podcast/ios.jpg&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;itunes:category</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;Technology&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;itunes:category</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;Gadgets&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/itunes:category&gt;</span>
<span class="w">    </span><span class="nt">&lt;itunes:category</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;TV &amp;amp; Film&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>De cada <em>item</em> deberemos proporcionar la siguiente información:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;item&gt;</span>

<span class="w">  </span><span class="nt">&lt;title&gt;</span>Episodio<span class="w"> </span>1<span class="nt">&lt;/title&gt;</span>

<span class="w">  </span><span class="nt">&lt;itunes:author&gt;</span>Miguel<span class="w"> </span>Ángel<span class="w"> </span>Lozano<span class="nt">&lt;/itunes:author&gt;</span>
<span class="w">  </span><span class="nt">&lt;itunes:subtitle&gt;</span>Características<span class="w"> </span>de<span class="w"> </span>los<span class="w"> </span>dispositivos<span class="nt">&lt;/itunes:subtitle&gt;</span>
<span class="w">  </span><span class="nt">&lt;itunes:summary&gt;</span>
<span class="w">    </span>Redes<span class="w"> </span>de<span class="w"> </span>telefonía<span class="w"> </span>móvil.<span class="w"> </span>Tipos<span class="w"> </span>de<span class="w"> </span>dispositivos.<span class="w"> </span>Plataformas<span class="w"> </span>de<span class="w"> </span>desarrollo
<span class="w">  </span><span class="nt">&lt;/itunes:summary&gt;</span>
<span class="w">  </span><span class="nt">&lt;itunes:image</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;http://www.jtech.ua.es/images/logo-especialista-moviles_mini.png&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">  </span><span class="nt">&lt;enclosure</span><span class="w"> </span><span class="na">url=</span><span class="s">&quot;http://localhost/~malozano/episodio1.mp3&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;169608456&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;audio/mpeg&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;guid&gt;</span>http://localhost/~malozano/episodio1.mp3<span class="nt">&lt;/guid&gt;</span>

<span class="w">  </span><span class="nt">&lt;pubDate&gt;</span>Mon,<span class="w"> </span>5<span class="w"> </span>Mar<span class="w"> </span>2012<span class="w"> </span>19:00:00<span class="w"> </span>GMT<span class="nt">&lt;/pubDate&gt;</span>
<span class="w">  </span><span class="nt">&lt;itunes:duration&gt;</span>1:28:20<span class="nt">&lt;/itunes:duration&gt;</span>
<span class="w">  </span><span class="nt">&lt;itunes:keywords&gt;</span>dispositivos,<span class="w"> </span>moviles,<span class="w"> </span>redes,<span class="w"> </span>desarrollo<span class="nt">&lt;/itunes:keywords&gt;</span>

<span class="nt">&lt;/item&gt;</span>
</code></pre></div>
<p>Debemos prestar especial atención a <code>&lt;enclosure&gt;</code> y <code>&lt;guid&gt;</code>. En el primero especificaremos la URL donde está publicado el contenido multimedia y sus datos (tipo y longitud del contenido). En el segundo deberemos indicar un identificador único para cada episodio. Si introducimos dos episodios con el mismo <em>guid</em> las aplicaciones pensarán que se trata del mismo episodio, y no lo mostrarán correctamente. Una buena práctica es utilizar la URL del medio como <em>guid</em>.</p>
<h3 id="subscripcion-a-un-podcast">Subscripción a un <em>podcast</em><a class="headerlink" href="#subscripcion-a-un-podcast" title="Permanent link">&para;</a></h3>
<p>Existen diferentes aplicaciones en las que podemos suscribirnos a <em>podcasts</em>, aunque la principal de ellas es iTunes. Con la opción <em>Archivo &gt; Suscribirse a un podcast ...</em> podremos introducir la URL del <em>feed</em> del <em>podcast</em> al que nos queremos suscribir.</p>
<p>Encontramos otras aplicaciones como iVoox en las que también podemos suscribirnos a <em>podcasts</em> desde cualquier dispositivo.</p>
<p>Una vez hemos creado un <em>podcast</em> podemos enviar la URL del <em>feed</em> a Apple para solicitar que lo incluya en el catálogo de <em>iTunes Store</em>.</p>
<h2 id="descarga-progresiva">Descarga progresiva<a class="headerlink" href="#descarga-progresiva" title="Permanent link">&para;</a></h2>
<p>Mediante <em>podcasts</em> podemos suministrar vídeo a dispositivos móviles para ser reproducido <em>offline</em> en cualquier momento. Sin embargo muchas veces necesitaremos reproducir de forma <em>online</em> vídeos que no hayan sido descargados previamente. Una forma sencilla de hacer esto es simplemente publicar el vídeo en un servidor web y descargarlo mediante HTTP.</p>
<p>Al ser los vídeos ficheros de gran tamaño, la descarga puede durar un tiempo considerable. Esta espera para empezar a reproducir el vídeo puede resultar algo prohibitivo para el uso de nuestra aplicación. Para evitar este problema lo que podemos hacer es reproducir el vídeo durante la descarga. Esto es lo que se conoce como descarga progresiva o <em>pseudostreaming</em>.</p>
<p>Para utilizar descarga progresiva normalmente basta con publicar los vídeos en un servidor web. Sin embargo, para garantizar máxima compatibilidad deberemos tener en cuenta algunos factores sobre la estructura del fichero.</p>
<h3 id="atomos-del-fichero-de-video">Átomos del fichero de vídeo<a class="headerlink" href="#atomos-del-fichero-de-video" title="Permanent link">&para;</a></h3>
<p>Para poder reproducir el vídeo de forma progresiva el reproductor debe tener la información sobre el vídeo (índice del fichero) antes de empezar a recibir el contenido.</p>
<p>Los formatos de fichero <code>mov</code> y <code>mp4</code> constan de una serie de partes o átomos:</p>
<ul>
<li><code>ftyp</code>: Formato de la película</li>
<li><code>moov</code>: Contiene metadatos</li>
<li><code>wide</code>: Permite ampliar <code>moov</code></li>
<li><code>mdat</code>: Contiene datos de la película</li>
</ul>
<p>Es importante que el bloque de metadatos <code>moov</code> se obtanga antes de empezar a leer el bloque de datos <code>mdat</code> para así poder reproducir el vídeo durante la descarga, pero no siempre el átomo <code>moov</code> está antes que <code>mdat</code> en el fichero. Muchas aplicaciones al guardar este formato esperan al final para escribir el índice del fichero, cuando ya está todo el contenido almacenado, y por lo tanto dejan <code>moov</code> al final.</p>
<p>Para la mayoría de reproductores actuales tener el bloque <code>moov</code> al final del fichero no supone un problema, ya que son capaces de solicitar al servidor que les devuelva en primer lugar los últimos bloques del fichero, para así poder reproducir el vídeo en descarga progresiva.</p>
<p>Sin embargo, para algunos reproductores no es posible hacer esto. Para que la descarga progresiva funcione en estos casos deberemos mover el bloque <code>moov</code> al principio del fichero. Esto es lo que se conoce como <em>Faststart</em>.</p>
<p>Si no realizamos la reordenación, en estos reproductores (normalmente de versiones antiguas de Android) nos aparecerá un mensaje como el siguiente:</p>
<p><img alt="Descarga del vídeo completo" src="imagenes/faststart-01-download.png" /></p>
<p>Al no poder reproducir el vídeo durante la descarga nos pregunta si queremos descargarlo para reproducirlo en local.</p>
<h3 id="faststart"><em>Faststart</em><a class="headerlink" href="#faststart" title="Permanent link">&para;</a></h3>
<p><em>Faststart</em> consiste en mover el átomo <code>moov</code> al comienzo de un fichero de vídeo para poderlo reproducir en descarga progresiva en cualquier navegador.</p>
<p><img alt="Reordenación de átomos" src="imagenes/faststart-02-atoms.png" /></p>
<p>Es posible aplicar <em>faststart</em> sin tener que recodificar el vídeo, simplemente tenemos que reordenar los datos. Podemos aplicarlo con <code>ffmpeg</code>:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-movflags<span class="w"> </span>faststart
</code></pre></div>
<p>También existen herramientas como <em>QT Index Swapper</em> (http://renaun.com/blog/code/qtindexswapper/) que nos permiten realizar este cambio.</p>
<h3 id="desventajas-de-la-descarga-progresiva">Desventajas de la descarga progresiva<a class="headerlink" href="#desventajas-de-la-descarga-progresiva" title="Permanent link">&para;</a></h3>
<p>Con la descarga progresiva podemos reproducir un vídeo conforme se descarga del servidor, sin tener que esperar a que finalice la descarga, y pudiendo utilizar cualquier servidor web para su publicación.</p>
<p>Sin embargo, mientras estemos viendo el vídeo el fichero se descargará normalmente a una velocidad mayor a la velocidad de reproducción. Esto puede suponer que viendo unos pocos segundos de vídeo hayamos descargado una gran cantidad de datos. Esto puede ser un problema importante cuando accedamos a vídeo desde la red de datos móviles, que tiene un límite de descarga acotado. Por lo tanto, para vídeos de gran tamaño deberemos evitar este práctica.</p>
<p>Por ejemplo, aquellas aplicaciones iOS que accedan mediante descarga progresiva a vídeos de más de 10 minutos o más de 5Mb a través de la red de datos móviles serán rechazadas por Apple y no podrán ser publicadas en la App Store. En estos casos deberemos acceder a los vídeos mediante <em>streaming</em></p>
<h2 id="streaming"><em>Streaming</em><a class="headerlink" href="#streaming" title="Permanent link">&para;</a></h2>
<p>Los sistemas de <em>streaming</em> consisten en enviar al cliente pequeños fragmentos de vídeo conforme estos se necesiten para la reproducción. En el cliente se recibirán y se reproducirán estos fragmentos pero, al contrario que en el caso de la descarga progresiva, el vídeo completo no se descargará en el dispositivo. Los fragmentos se irán desechando conforme no se necesiten. De este modo el dispositivo descargará sólo los datos de vídeo que se estén reproduciendo, y no el fichero entero.</p>
<p>Deberemos utilizar un sistema de <em>streaming</em> en los siguientes casos:</p>
<ul>
<li>Cuando tengamos <strong>Vídeo Bajo Demanda (VOD)</strong> con ficheros de gran tamaño. Servirlos mediante <em>streaming</em> hará que sólo se descargue lo que se vaya a reproducir. Si no se reproduce el vídeo entero, no tendrá que bajar todo el fichero.</li>
<li>Cuando tengamos emisiones de <strong>vídeo en directo</strong>. En este caso es imposible enviar el vídeo mediante un fichero, ya que el fichero se está grabando en este momento. Lo único que se puede enviar son los fragmentos del vídeo conforme estos son capturados.</li>
</ul>
<h3 id="protocolos-de-streaming">Protocolos de <em>streaming</em><a class="headerlink" href="#protocolos-de-streaming" title="Permanent link">&para;</a></h3>
<p>Existen diferentes protocolos para ofrecer vídeo mediante <em>streaming</em>:</p>
<ul>
<li>RTSP (<em>Real Time Streaming Protocol</em>): Funciona como un reproductor de vídeo, con comandos para reproducir, pausar y parar. En lugar de tener comandos como <code>GET</code> o <code>POST</code> de HTTP, tenemos otros comandos como <code>PLAY</code>, <code>PAUSE</code> o `STOP``. Fue desarrollado por <em>RealNetworks</em>.</li>
<li>RTMP: Protocolo propietario desarrollado por Macromedia/Adobe, e implementado en <em>Flash Media Server</em>. La especificación hizo pública en 2009, permitiendo así integrarlo en otras redes de distribución de contenidos (CDNs). Este protocolo fue diseñado para emitir vídeo Flash, y se utiliza por ejemplo en aplicaciones como YouTube. Encapsula vídeo FLV y audio MP3 o AAC.</li>
<li>HLS (<em>HTTP Live Streaming</em>): Procolo desarrollado por Apple. Es el sistema que Apple recomienda y el que debemos utilizar en las aplicaciones iOS. Se basa en particionar los vídeos en una serie de pequeños fragmentos, y publicarlos en un servidor web HTTP convecional.</li>
</ul>
<p>La mayor diferencia entre los protocolos anteriores es que tanto RTSP como RTMP requieren servidores especiales, sin embargo, HLS puede funcionar sobre cualquier servidor web al funcionar sobre HTTP. Esto tiene también la ventaja de que HLS tendrá una mayor compatibilidad con los distintos nodos de la red (<em>gateways</em>, <em>routers</em>, etc).</p>
<p>RTMP tiene la ventaja de que soporta <em>multicast</em> (un mismo <em>stream</em> sirve para varios clientes), cosa que HTTP lo permite. Además, RTMP es más granular. Envía pequeños paquetes, y permite reanudar el vídeo en el lugar que se quedó con mayor precisión. Para utilizar RTMP será recomendable utilizar las tecnlogías Adobe Air.</p>
<p>A continuación mostramos la compatibilidad de cada protocolo con las diferentes plataformas móviles:</p>
<ul>
<li>HLS: iOS y Android 3.0 o superior.</li>
<li>RTSP: Android.</li>
<li>RTMP: Adobe Air (multiplataforma)</li>
</ul>
<h3 id="http-live-streaming"><em>HTTP Live Streaming</em><a class="headerlink" href="#http-live-streaming" title="Permanent link">&para;</a></h3>
<p><em>HTTP Live Streaming</em> es un protocolo de <em>streaming</em> desarrollado por Apple que se basa en segmentar el vídeo en pequeños fragmentos, y publicarlos en un servidor web ordinario para su descarga mediante HTTP.</p>
<p>Podrá utilizarse tanto para VOD como para emisiones en directo. Simplemente necesitaremos una aplicación que codifique y segmente el vídeo. En caso del VOD, podremos segmentar el vídeo <em>offline</em> y copiar los fragmentos al servidor web. El caso de tener vídeo en directo, deberemos codificar, generar segmentos, y publicarlos en el servidor conforme se realiza la captura del vídeo.</p>
<p><img alt="Workflow de HLS" src="imagenes/hls-01-workflow.png" /></p>
<p>Apple nos proporciona las herramientas <code>mediafilesegmenter</code> y <code>mediastreamsegmenter</code> que nos permiten segmentar VOD y vídeo en directo respectivamente. También podremos hacerlo mediante aplicaciones como VLC o <code>ffmpeg</code>.</p>
<h3 id="formato-de-video-en-hls">Formato de vídeo en HLS<a class="headerlink" href="#formato-de-video-en-hls" title="Permanent link">&para;</a></h3>
<p>En HLS el vídeo se particiona en una serie de segmentos con las siguientes características:</p>
<ul>
<li>Formato de fichero <code>.ts</code></li>
<li>Vídeo H.264</li>
<li>Audio AAC</li>
</ul>
<p>Todos estos segmentos se integran mediante un índice (<em>playlist</em>) con formato <code>M3U8</code>. Esta <em>playlist</em> tiene la siguiente estructura:</p>
<div class="highlight"><pre><span></span><code>#EXTM3U
#EXT-X-TARGETDURATION:10
#EXT-X-MEDIA-SEQUENCE:1
#EXTINF:10,
http://media.example.com/segment0.ts
#EXTINF:10,
http://media.example.com/segment1.ts
#EXTINF:10,
http://media.example.com/segment2.ts
#EXT-X-ENDLIST
</code></pre></div>
<p>En este caso tenemos un vídeo con 3 segmentos, cada uno de ellos de 10 segundos de duración. Para publicar el vídeo, tendremos que publicar en el servidor web los segmentos y la <em>playlist</em>:</p>
<ul>
<li>segment0.ts</li>
<li>segment1.ts</li>
<li>segment2.ts</li>
<li>video.m3u8</li>
</ul>
<p>El vídeo completo tendrá por lo tanto una duración se 30 segundos. Para reproducir el vídeo deberemos especificar la dirección donde está el <em>playlist</em>. Por ejemplo, si tenemos la <em>playlist</em> publicada en <code>http://media.example.com/video.m3u8</code>, bastará con introducir esta URL en Safari para reproducirlo.</p>
<p>En caso de tener VOD bastará con segmentar el vídeo con alguna herramienta y publicar los ficheros generados en un servidor web. Para emisiones en directo deberemos tener ejecutándose la herramienta de segmentación, que irá generando segmentos del vídeo capturado y los irá publicando en el servidor, modificando la <em>playlist</em> en cada momento.</p>
<h3 id="generacion-de-hls-con-ffmpeg">Generación de HLS con <code>ffmpeg</code><a class="headerlink" href="#generacion-de-hls-con-ffmpeg" title="Permanent link">&para;</a></h3>
<p>Podemos utilizar la herramienta <code>ffmpeg</code> para generar vídeo HLS. A continuación mostramos ejemplos para generar vídeo con diferentes perfiles de calidad.</p>
<p>Perfil bajo:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>entrada.mp4<span class="w"> </span>-c:a<span class="w"> </span>aac<span class="w"> </span>-ac<span class="w"> </span><span class="m">1</span><span class="w"> </span>-b:a<span class="w"> </span>32k<span class="w"> </span>-ar<span class="w"> </span><span class="m">22050</span>
<span class="w">       </span>-c:v<span class="w"> </span>h264<span class="w"> </span>-profile:v<span class="w"> </span>baseline<span class="w"> </span>-level<span class="w"> </span><span class="m">3</span>.0<span class="w"> </span>-b:v<span class="w"> </span>200K<span class="w"> </span>-r<span class="w"> </span><span class="m">12</span><span class="w"> </span>-g<span class="w"> </span><span class="m">36</span>
<span class="w">       </span>-f<span class="w"> </span>hls<span class="w"> </span>-hls_time<span class="w"> </span><span class="m">10</span><span class="w"> </span>-hls_list_size<span class="w"> </span><span class="m">999</span><span class="w"> </span>-s<span class="w"> </span>320x180<span class="w"> </span>low.m3u8
</code></pre></div>
<p>Perfil medio:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>entrada.mp4<span class="w"> </span>-c:a<span class="w"> </span>aac<span class="w"> </span>-ac<span class="w"> </span><span class="m">2</span><span class="w"> </span>-b:a<span class="w"> </span>64k<span class="w"> </span>-ar<span class="w"> </span><span class="m">44100</span>
<span class="w">       </span>-c:v<span class="w"> </span>h264<span class="w"> </span>-profile:v<span class="w"> </span>baseline<span class="w"> </span>-level<span class="w"> </span><span class="m">3</span>.1<span class="w"> </span>-b:v<span class="w"> </span>600K<span class="w"> </span>-r<span class="w"> </span><span class="m">24</span><span class="w"> </span>-g<span class="w"> </span><span class="m">72</span>
<span class="w">       </span>-f<span class="w"> </span>hls<span class="w"> </span>-hls_time<span class="w"> </span><span class="m">10</span><span class="w"> </span>-hls_list_size<span class="w"> </span><span class="m">999</span><span class="w"> </span>-s<span class="w"> </span>640x360<span class="w"> </span>medium.m3u8
</code></pre></div>
<p>Perfil alto:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>entrada.mp4<span class="w"> </span>-c:a<span class="w"> </span>aac<span class="w"> </span>-ac<span class="w"> </span><span class="m">2</span><span class="w"> </span>-b:a<span class="w"> </span>96k<span class="w"> </span>-ar<span class="w"> </span><span class="m">44100</span>
<span class="w">       </span>-c:v<span class="w"> </span>h264<span class="w"> </span>-profile:v<span class="w"> </span>main<span class="w"> </span>-level<span class="w"> </span><span class="m">3</span>.1<span class="w"> </span>-b:v<span class="w"> </span>1500K<span class="w"> </span>-r<span class="w"> </span><span class="m">24</span><span class="w"> </span>-g<span class="w"> </span><span class="m">72</span>
<span class="w">       </span>-f<span class="w"> </span>hls<span class="w"> </span>-hls_time<span class="w"> </span><span class="m">10</span><span class="w"> </span>-hls_list_size<span class="w"> </span><span class="m">999</span><span class="w"> </span>-s<span class="w"> </span>1280x720<span class="w"> </span>high.m3u8
</code></pre></div>
<h3 id="bitrate-adaptativo-abr"><em>Bitrate</em> adaptativo (ABR)<a class="headerlink" href="#bitrate-adaptativo-abr" title="Permanent link">&para;</a></h3>
<p>En el caso anterior hemos creado diferentes versiones del vídeo HLS dirigidas a distintos anchos de banda. Este protocolo nos permite integrar todas estas versiones en una única <em>playlist</em>, para que así el sistema seleccione la más adecuada en función del ancho de banda disponible. De esta forma, si empezamos con un perfil de alta calidad y a mitad se produce una caída del ancho de banda en la conexión, automáticamente saltará a una versión con una calidad adecuada al nuevo ancho de banda disponible.</p>
<p>Tendremos lo que se conoce como una <em>variant playlist</em>. En ella indicamos las distintas <em>playlists</em> disponibles para las diferentes versiones, y el ancho de banda mínimo necesario para cada una de ellas:</p>
<div class="highlight"><pre><span></span><code>#EXTM3U

#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=200000
low.m3u8

#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=600000
medium.m3u8

#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1500000
high.m3u8
</code></pre></div>
<p>Podemos generar con <code>ffmpeg</code> directamente una <em>variant playlist</em> a partir de un vídeo de la siguiente forma:</p>
<div class="highlight"><pre><span></span><code><span class="nv">VIDSOURCE</span><span class="o">=</span><span class="s2">&quot;video.mp4&quot;</span>
<span class="nv">RESOLUTION</span><span class="o">=</span><span class="s2">&quot;854x480&quot;</span>
<span class="nv">BITRATE1</span><span class="o">=</span><span class="s2">&quot;800000&quot;</span>
<span class="nv">BITRATE2</span><span class="o">=</span><span class="s2">&quot;600000&quot;</span>
<span class="nv">BITRATE3</span><span class="o">=</span><span class="s2">&quot;400000&quot;</span>

<span class="nv">AUDIO_OPTS</span><span class="o">=</span><span class="s2">&quot;-c:a libfaac -b:a 160000 -ac 2&quot;</span>
<span class="nv">VIDEO_OPTS1</span><span class="o">=</span><span class="s2">&quot;-s </span><span class="nv">$RESOLUTION</span><span class="s2"> -c:v libx264 -b:v </span><span class="nv">$BITRATE1</span><span class="s2"> -vprofile baseline -preset medium -x264opts level=41&quot;</span>
<span class="nv">VIDEO_OPTS2</span><span class="o">=</span><span class="s2">&quot;-s </span><span class="nv">$RESOLUTION</span><span class="s2"> -c:v libx264 -b:v </span><span class="nv">$BITRATE2</span><span class="s2"> -vprofile baseline -preset medium -x264opts level=41&quot;</span>
<span class="nv">VIDEO_OPTS3</span><span class="o">=</span><span class="s2">&quot;-s </span><span class="nv">$RESOLUTION</span><span class="s2"> -c:v libx264 -b:v </span><span class="nv">$BITRATE3</span><span class="s2"> -vprofile baseline -preset medium -x264opts level=41&quot;</span>
<span class="nv">OUTPUT_HLS</span><span class="o">=</span><span class="s2">&quot;-hls_time 3 -hls_list_size 10 -hls_wrap 30 -start_number 1&quot;</span>

ffmpeg<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$VIDSOURCE</span><span class="s2">&quot;</span><span class="w"> </span>-y<span class="w"> </span>-threads<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="se">\</span>
<span class="w">       </span><span class="nv">$AUDIO_OPTS</span><span class="w"> </span><span class="nv">$VIDEO_OPTS1</span><span class="w"> </span><span class="nv">$OUTPUT_HLS</span><span class="w"> </span>alto.m3u8<span class="w"> </span><span class="se">\</span>
<span class="w">       </span><span class="nv">$AUDIO_OPTS</span><span class="w"> </span><span class="nv">$VIDEO_OPTS2</span><span class="w"> </span><span class="nv">$OUTPUT_HLS</span><span class="w"> </span>medio.m3u8<span class="w"> </span><span class="se">\</span>
<span class="w">       </span><span class="nv">$AUDIO_OPTS</span><span class="w"> </span><span class="nv">$VIDEO_OPTS3</span><span class="w"> </span><span class="nv">$OUTPUT_HLS</span><span class="w"> </span>bajo.m3u8
</code></pre></div>
<h2 id="servidores-de-streaming">Servidores de <em>streaming</em><a class="headerlink" href="#servidores-de-streaming" title="Permanent link">&para;</a></h2>
<p>Existen diferentes servidores y servicios en la nube que nos permiten emitir vídeo bajo demanda y en directo en diferentes formatos, dando soporte a la práctica totalidad de dispositivos actuales.</p>
<p>Encontramos por ejemplo servicios en la nube como Zencoder (http://zencoder.com) y VideoCloud (http://videocloud.brightcove.com/).</p>
<p>También encontramos servidores que podemos instalar en nuestro propio equipo como Wowza Media Server (http://wowza.com/). Vamos a centrarnos en estudiar el uso de este servidor.</p>
<h3 id="configuracion-de-wowza-media-server">Configuración de Wowza Media Server<a class="headerlink" href="#configuracion-de-wowza-media-server" title="Permanent link">&para;</a></h3>
<p>Para poder utilizar Wowza Media Server deberemos seguir los siguientes pasos:</p>
<ul>
<li>
<p>El primer lugar debemos configurar un usuario y password para acceder al servidor. Para ello editamos el fichero <code>/Library/WowzaStreamingEngine/conf/admin.password</code> y añadimos la siguiente linea:
<div class="highlight"><pre><span></span><code>admin mastermoviles
</code></pre></div>
Con esto habremos creado un usuario <code>admin</code> con <em>password</em> <code>mastermoviles</code>.</p>
</li>
<li>
<p>Iniciamos el servidor, entrando en <em>Aplicaciones &gt; Wowza Streaming Engine</em> y seleccionando <em>Start Standalone Mode</em></p>
</li>
</ul>
<p><img alt="Configuración de Wowza - Directorio de la aplicación" src="imagenes/wowza-09-shortcuts.png" /></p>
<ul>
<li>Podremos acceder al servidor desde un navegador utilizando la dirección <code>http://localhost:8088</code>. La primera vez que accedamos veremos la siguiente pantalla de bienvenida:</li>
</ul>
<p><img alt="Configuración de Wowza - Bienvenida" src="imagenes/wowza-01-welcome.png" /></p>
<ul>
<li>Pulsamos en <em>Next</em>, y nos mostrará el <em>workflow</em> del servidor:</li>
</ul>
<p><img alt="Configuración de Wowza - Workflow" src="imagenes/wowza-02-workflow.png" /></p>
<ul>
<li>Pulsamos de nuevo en <em>Next</em>, y nos pedirá que introduzcamos los datos del usuario administrador del servidor. Introduciremos los datos que configuramos en el primer paso:</li>
</ul>
<p><img alt="Configuración de Wowza - Login" src="imagenes/wowza-03-sign-in.png" /></p>
<ul>
<li>A continuación nos pedirá que demos de alta un usuario con perfil de <em>publisher</em>. Este usuario será necesario para poder emitir video en directo a través del servidor:</li>
</ul>
<p><img alt="Configuración de Wowza - Alta del publisher" src="imagenes/wowza-04-create-publisher.png" /></p>
<ul>
<li>Una vez creado ese usuario, veremos la pantalla principal de Wowza. Esto es lo que veremos las próximas veces que arranquemos Wowza, al estar ya configurado:</li>
</ul>
<p><img alt="Configuración de Wowza - Dashboard" src="imagenes/wowza-05-dashboard.png" /></p>
<h3 id="publicacion-de-contenido-vod">Publicación de contenido VOD<a class="headerlink" href="#publicacion-de-contenido-vod" title="Permanent link">&para;</a></h3>
<p>Una vez configurado el servidor podremos añadir tanto emisiones en directo como contenido bajo demanda (VOD). Vamos a centrarnos en primer lugar en la forma de añadir contenido VOD.</p>
<p>Para añadir este tipo de contenido simplemente tenemos que copiar los videos que queramos publicar a la carpeta de contenido (<em>Content</em>) del servidor.</p>
<ul>
<li>Tenemos un enlace a esta carpeta desde el directorio principal de la aplicación:</li>
</ul>
<p><img alt="Configuración de Wowza - Directorio de la aplicación" src="imagenes/wowza-09-shortcuts.png" /></p>
<ul>
<li>Entramos en la carpeta <code>Content</code>, y copiaremos en ella todos los vídeos que queramos publicar:</li>
</ul>
<p><img alt="Configuración de Wowza - Carpeta de contenido VOD" src="imagenes/wowza-10-content.png" /></p>
<ul>
<li>Una vez hecho esto, podremos acceder al contenido desde la web de Wowza. Para ello desde la página principal del servidor pulsaremos sobre <em>Applications &gt; vod</em>:</li>
</ul>
<p><img alt="Configuración de Wowza - Aplicaciones" src="imagenes/wowza-06-applications.png" /></p>
<ul>
<li>Con esto entraremos en la aplicación de VOD. En esta aplicación veremos un botón con el texto <em>Test Players</em> que nos permitirá acceder a una serie de reproductores de prueba para los vídeos publicados en la aplicación de VOD. Pulsando sobre este botón accederemos a ellos, y por ejemplo entraremos en el reproductor <em>Apple HLS</em>. Aquí introducir el nombre del fichero que queramos reproducir y verlo en el reproductor de prueba:</li>
</ul>
<p><img alt="Configuración de Wowza - HLS" src="imagenes/wowza-07-hls.png" /></p>
<ul>
<li>En la pestaña <em>Mobile</em> el servidor nos mostrará los enlaces mediante los cuales podríamos reproducir los vídeos vía <em>streaming</em> en dispositivos móviles iOS y Android, mediante HLS y RTSP respectivamente:</li>
</ul>
<p><img alt="Configuración de Wowza - Direcciones para moviles" src="imagenes/wowza-08-mobile.png" /></p>
<p>Si abrimos estos enlaces desde el navegador de dispositivos que estén en una red desde la que tengan visibilidad de la IP del servidor podremos ver los vídeos publicados.</p>
<h3 id="acceso-a-wowza-mediante-ssl">Acceso a Wowza mediante SSL<a class="headerlink" href="#acceso-a-wowza-mediante-ssl" title="Permanent link">&para;</a></h3>
<p>A partir de iOS 9 sólo se permite establecer conexiones mediante SSL (<code>https</code>) por motivos de seguridad. Aunque podemos añadir excepciones en nuestra aplicaciones para poder seguir accediendo mediante <code>http</code>, no es recomendable hacerlo. Vamos a ver a continuación la forma de configurar Wowza para poder acceder a los contenidos multimedia mediante SSL tal como se recomienda a partir de iOS 9.</p>
<p>Para poder configurar <code>https</code> en Wowza deberemos crearnos un certificado cuyo nombre (<code>CN</code>) coincida con el dominio a proteger. Por ejemplo, si nuestro contenido va a estar en <code>eps.ua.es</code>, deberemos crear un certificado con <code>CN=eps.ua.es</code>. Esto nos serviará para aseguramos de que no se está suplantando al servidor. Además, nuestro certificado deberá estar firmado por una autoridad de certificación (CA), como por ejemplo Verisign o Thawte. 
Como alternativa, veremos también la posibilidad de convertirnos nosotros mismos en "autoridad de certificación", aunque en ese caso deberemos proporcionar al usuario nuestro certificado raíz para que lo instale en su dispositivo como certificado de confianza.</p>
<p>Una vez creado el certificado, se incluirá en Wowza y se habilitará un puerto de acceso mediante SSL utilizando dicho certificado. </p>
<p>Vamos a ver a continuación cómo realizar esta configuración paso a paso:</p>
<h4 id="creacion-del-certificado">Creación del certificado<a class="headerlink" href="#creacion-del-certificado" title="Permanent link">&para;</a></h4>
<p>En primer lugar debemos crear el certificado para nuestro sitio web. Imaginemos que queremos proteger el sitio <code>mastermoviles.eps.ua.es</code>, donde tendremos instalado un servidor Wowza, y acceder a él mediante SSL garantizando que no ha sido suplantado por otro. Crearemos un par de claves pública-privada para Wowza de la siguiente forma:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-genkey<span class="w"> </span>-keysize<span class="w"> </span><span class="m">2048</span><span class="w"> </span>-alias<span class="w"> </span>wowza<span class="w"> </span>-keyalg<span class="w"> </span>RSA<span class="w"> </span>-keystore<span class="w"> </span>mastermoviles.eps.ua.es.jks
</code></pre></div>
<p>En el asistente para la creación de las claves, cuando nos pregunte por el <em>Common Name</em> (CN) es importante indicar <code>mastermoviles.eps.ua.es</code>, ya que debe coincidir con el dominio del sitio web a proteger. </p>
<blockquote>
<p>Al crear el almacén de claves y el <em>alias</em> <code>wowza</code>, que será la clave que utilice Wowza para establecer el canal SSL, deberemos especificar el mismo <em>password</em> para el almacén y para el <em>alias</em>.</p>
</blockquote>
<p>Una vez hecho esto, crearemos una solicitud de certificado (CSR) para nuestra clave:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-certreq<span class="w"> </span>-file<span class="w"> </span>mastermoviles.eps.ua.es.csr<span class="w"> </span>-alias<span class="w"> </span>wowza<span class="w"> </span>-keyalg<span class="w"> </span>RSA<span class="w"> </span>-keystore<span class="w"> </span>mastermoviles.eps.ua.es.jks
</code></pre></div>
<p>Esta solicitud podrá ser enviada a una autoridad de certificación para que nos proporcionen un certificado firmado por ellos correspondiente a nuestro par de claves. Como alternativa, vamos a ver cómo convertirnos en "autoridad de certificación" creando un certificado raíz autofirmado.</p>
<h4 id="autofirmar-nuestro-certificado">Autofirmar nuestro certificado<a class="headerlink" href="#autofirmar-nuestro-certificado" title="Permanent link">&para;</a></h4>
<p>Si optamos por solicitar nuestro certificado firmado a una autoridad de certificación (CA) existente no será necesario realizar este paso. </p>
<p>En caso de trabajar en un ámbito de pruebas, o en un proyecto de ámbito cerrado, puede ser conveniente firmar nosotros mismos nuestro certificado, en lugar de solicitarlo a una CA, aunque en este caso a quienes conecten a nuestro sitio web les aparecerá como "No seguro", a no ser que se instalen y confíen en nuestro certificado raíz autofirmado.</p>
<p>Para crear este certificado autofirmado en primer lugar creamos el par de claves:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>eps.ua.es.key<span class="w"> </span><span class="m">2048</span>
</code></pre></div>
<p>Tras esto, generamos el certificado autofirmado:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-x509<span class="w"> </span>-sha256<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>eps.ua.es.key<span class="w"> </span>-out<span class="w"> </span>eps.ua.es.cer<span class="w"> </span>-days<span class="w"> </span><span class="m">730</span><span class="w"> </span>-subj<span class="w"> </span>/CN<span class="o">=</span>“eps.ua.es”
</code></pre></div>
<p>Este certificado deberá difundirse entre todos los que vayan a utilizar nuestra aplicación, para que lo instalen en sus dispositivos como certificado raíz de confianza. De no ser así, los certificados que firmemos con él tampoco serán validos.</p>
<p>Una vez tenemos el certificado raíz autofirmado, podemos firmar con él el certificado para nuestro sitio web:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-req<span class="w"> </span>-in<span class="w"> </span>mastermoviles.eps.ua.es.csr<span class="w"> </span>-out<span class="w"> </span>mastermoviles.eps.ua.es.cer<span class="w"> </span>-CAkey<span class="w"> </span>eps.ua.es.key<span class="w"> </span>-CA<span class="w"> </span>eps.ua.es.cer<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-CAcreateserial<span class="w"> </span>-CAserial<span class="w"> </span>serial
</code></pre></div>
<p>Con esto obtenemos un certificado firmado por nosotros mismos. Si hubiésemos recurrido a una CA, nos habría proporcionado también este mismo fichero <code>cer</code>, pero en ese caso firmado por un certificado raíz en el que ya confían los diferentes dispositivos. </p>
<h4 id="incluir-el-certificado-firmado-en-el-almacen-de-claves">Incluir el certificado firmado en el almacen de claves<a class="headerlink" href="#incluir-el-certificado-firmado-en-el-almacen-de-claves" title="Permanent link">&para;</a></h4>
<p>Una vez tenemos nuestro certificado firmado por una CA (o por un certificado raíz nuestro autofirmado), deberemos importar el certificado de la CA y nuestro certificado firmado por ella en nuestro almacén de claves. </p>
<p>En caso de haber creado un certificado raíz autofirmado, lo importamos en nuestro almacén de claves. En caso de haber obtenido el certificado de una CA, en su lugar importaremos el certificado puente de dicha CA:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-import<span class="w"> </span>-alias<span class="w"> </span>root<span class="w"> </span>-trustcacerts<span class="w"> </span>-file<span class="w"> </span>eps.ua.es.cer<span class="w"> </span>-keystore<span class="w"> </span>mastermoviles.eps.ua.es.jks
</code></pre></div>
<p>Además también debemos importar en el almacén el certificado propio de nuestro sitio web:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-import<span class="w"> </span>-alias<span class="w"> </span>wowza<span class="w"> </span>-trustcacerts<span class="w"> </span>-file<span class="w"> </span>mastermoviles.eps.ua.es.cer<span class="w"> </span>-keystore<span class="w"> </span>mastermoviles.eps.ua.es.jks
</code></pre></div>
<p>Con esto ya tendremos listo el almacen de claves para ser utilizado en Wowza. </p>
<h4 id="configuracion-del-puerto-seguro-en-wowza">Configuración del puerto seguro en Wowza<a class="headerlink" href="#configuracion-del-puerto-seguro-en-wowza" title="Permanent link">&para;</a></h4>
<p>Una vez contamos con nuestro almacen de claves configurado para nuestro sitio web, podemos configurar un puerto seguro en Wowza para acceder a través de él al contenido mediante SSL. Para ello, en la consola de Wowza entramos en la pestaña <em>Server</em> y dentro de ella en <em>Virtual Host Setup</em>. Veremos la lista de puertos (<em>Host Ports</em>) activos actualmente. Si pulsamos el botón <em>Edit</em> podremos editar este lista o añadir nuevos puertos. </p>
<p>Para configurar un nuevo puerto que utilice SSL pulsamos sobre <em>Add Host Port...</em> e introducimos la siguiente información:</p>
<ul>
<li><strong>Name</strong>: Indicamos un nombre para identificar el puerto en el entorno, por ejemplo <em>"Default SSL Streaming</em>.</li>
<li><strong>Type</strong>: Como tipo indicamos que será un puerto para la aplicación de <em>Streaming</em>.</li>
<li><strong>IP Adresses</strong>: Indicamos que se puede acceder desde cualquier IP, con <em>"*"</em>.</li>
<li><strong>Port(s)</strong>: El puerto al que conectaremos mediante SSL. Si el puerto no seguro por defecto es 1935, podríamos utilizar para SSL por ejemplo el puerto 1936.</li>
<li><strong>Enable SSL/StreamLock</strong>: Será importante marcar esta casilla para que este puerto utilice conexión segura con SSL.</li>
<li><strong>Keystore Path</strong>: Indicamos aquí la ruta del almacén de claves que hemos creado anteriormente. Dado que lo hemos copiado en el directorio de configuración de Wowza, podemos indicar una ruta como la siguiente:
<div class="highlight"><pre><span></span><code>${com.wowza.wms.context.VHostConfigHome}/conf/mastermoviles.eps.ua.es.jks
</code></pre></div></li>
<li><strong>Keystore Password</strong>: Indicamos aquí el <em>password</em> que hemos utilizado en nuestro almacén de claves (debe ser el mismo <em>password</em> para el almacén y para el <em>alias</em> <code>wowza</code> que almacena la clave a utilizar por este servidor.</li>
</ul>
<p><img alt="" src="imagenes/wowza-ssl-1.png" /> </p>
<p>Una vez introducidos los datos pulsamos <em>Add</em> y veremos el nuevo puerto en la lista:</p>
<p><img alt="" src="imagenes/wowza-ssl-2.png" /> </p>
<p>Ya podemos guardar pulsando en <em>Save</em> y reiniciar el servidor (nos aparecerá un botón <em>Restart Now</em> invitándonos a hacerlo para que se apliquen los cambios). </p>
<p>Tras esto ya podremos acceder a los contenidos desde un navegador o desde nuestras aplicaciones.</p>
<h4 id="acceder-a-aplicaciones-con-certificado-autofirmado">Acceder a aplicaciones con certificado autofirmado<a class="headerlink" href="#acceder-a-aplicaciones-con-certificado-autofirmado" title="Permanent link">&para;</a></h4>
<p>Si nuestro certificado no está firmado por una CA válida, sino que está autofirmado por nosotros, los navegadores y aplicaciones en principio no lo considerarán de confianza y por lo tanto no podremos acceder a los contenidos hasta que no confíe en él.</p>
<p>En caso de que intentemos acceder a uno de los vídeos por SSL en Wowza, el navegador nos indicará lo siguiente:</p>
<p><img alt="" src="imagenes/cert-web-1.PNG" /> </p>
<p>Aquí es <strong>muy importante no pulsar sobre <em>Continuar</em></strong>, sino pulsar sobre <em>Detalles</em> para que nos abra la siguiente vista:</p>
<p><img alt="" src="imagenes/cert-web-2.PNG" /> </p>
<p>Aquí vemos los detalles del certificado y podemos indicarle que confíe en él. Una vez sea de confianza ya tendremos acceso a los contenidos. </p>
<p>En caso de querer que nuestras aplicaciones puedan acceder, tendremos que instalar el certificado raíz en el dispositivo como certificado de confianza. Para ello enviaremos el certificado creado (fichero <code>.cer</code>) al dispositivo, por ejemplo como adjunto en un email. Abriremos el fichero y veremos lo siguiente:</p>
<p><img alt="" src="imagenes/cert-perfil-1.PNG" /> </p>
<p>Aquí vemos que el certificado aparece como no válido, indicando que está <em>Sin verificar</em>. Si pulsamos sobre <em>Instalar</em> podremos hacer que pase a ser de confianza, tal como nos indica en la siguiente pantalla:</p>
<p><img alt="" src="imagenes/cert-perfil-2.PNG" /> </p>
<p>Volvemos a pulsar sobre <em>Instalar</em> para confirmar la instalación y que lo guarde como certificado de confianza. A continuación veremos que el certificado ya está <em>Verificado</em>:</p>
<p><img alt="" src="imagenes/cert-perfil-3.PNG" /> </p>
<p>Una vez instalado el certificado raíz, si abrimos el certificado de nuestro sitio web veremos que ya nos aparece directamente como <em>Verificado</em>, ya que está firmado por un certificado raíz que actualmente es de confianza:</p>
<p><img alt="" src="imagenes/cert-perfil-4.PNG" /> </p>
<p>Con esto ya tendremos el dispositivo configurado para que pueda acceder a los vídeos en nuestro dominio mediante protocolo seguro. Con este sistema hay que remarcar que deberemos distribuir el certificado raíz entre todos aquellos que vayan a utilizar la aplicación, para que así lo puedan instalar como certificado de confianza. Para no tener que hacer esto deberíamos enviar nuestra aplicación para que la firme una CA válida, cuyo certificado raíz ya venga como certificado de confianza en el dispositivo.</p>
<h2 id="ejercicios">Ejercicios<a class="headerlink" href="#ejercicios" title="Permanent link">&para;</a></h2>
<h3 id="creacion-e-un-podcast">Creación e un <em>podcast</em><a class="headerlink" href="#creacion-e-un-podcast" title="Permanent link">&para;</a></h3>
<p>Para publicar el podcast puedes utilizar el servidor web Apache incluido en MacOS. Para arrancar el servidor introduciremos el siguiente comando en un <em>Terminal</em>:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>-s<span class="w"> </span>launchctl<span class="w"> </span>load<span class="w"> </span>-w<span class="w"> </span>/System/Library/LaunchDaemons/org.apache.httpd.plist
</code></pre></div>
<p>Podemos comprobar que el servidor está en marcha accediendo en un navegador a la dirección http://localhost. Veremos el texto <em>It works!</em>.</p>
<p>Los contenidos deberán publicarse en el directorio <code>/Library/WebServer/Documents</code>. Podemos abrirlo desde Finder con <em>Ir &gt; Ir a la carpeta …</em>.</p>
<p>Una vez hayamos terminado de trabajar con el servidor podemos pararlo con:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>-s<span class="w"> </span>launchctl<span class="w"> </span>unload<span class="w"> </span>-w<span class="w"> </span>/System/Library/LaunchDaemons/org.apache.httpd.plist
</code></pre></div>
<p>Para la realización puedes partir de la plantilla que encontrarás en la documentación oficial:   http://www.apple.com/es/itunes/podcasts/specs.html</p>
<p>Se pide:</p>
<ul>
<li>
<p>Crea un podcast con sólo el primer episodio que encontrarás en los recursos de la sesión (o cualquier otro fichero). Pon tu nombre como autor/a, y modifica el título del <em>podcast</em> y del episodio. Publica el <em>podcast</em> en Jetty y accede a él con iTunes.</p>
</li>
<li>
<p>Añade al podcast dos episodios más (puedes utilizar los ficheros proporcionados o recursos propios). Comprueba ahora cómo se actualiza la información del <em>podcast</em> en iTunes.</p>
</li>
</ul>
<h3 id="prueba-de-faststart">Prueba de <em>faststart</em><a class="headerlink" href="#prueba-de-faststart" title="Permanent link">&para;</a></h3>
<p>Vamos a probar el efecto de utilizar o no <em>faststart</em> en un vídeo MP4. Se pide:</p>
<ul>
<li>
<p>Descarga de los recursos de la sesión el fichero <em>Video sin faststart</em> y publícalo en el servidor web que utilizaste en el ejercicio anterior.</p>
</li>
<li>
<p>Abre el fichero con un editor de texto o hexadecimal. ¿Dónde está el bloque <code>moov</code>? Si cuentas con un dispositivo móvil Android o emulador con una versión previa a la 2.2, accede a la URL del vídeo desde su navegador. ¿Qué ocurre?</p>
</li>
<li>
<p>Modificar el vídeo con <code>ffmpeg</code> para añadir <em>faststart</em>.
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>video.mp4<span class="w"> </span>-c:a<span class="w"> </span>copy<span class="w"> </span>-c:v<span class="w"> </span>copy<span class="w"> </span>-movflags<span class="w"> </span>faststart<span class="w"> </span>video_fs.mp4
</code></pre></div></p>
</li>
<li>
<p>Abre el fichero con un editor y busca el bloque <code>moov</code> de nuevo. ¿Dónde está ahora? Publica el vídeo modificado y vuelve a probarlo desde el navegador del móvil. ¿Qué ocurre ahora?</p>
</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="assets/javascripts/bundle.b78d2936.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>