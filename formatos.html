
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="index.html">
      
      
        <link rel="next" href="streaming.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Formatos de audio y vídeo - Gráficos y Multimedia</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="Indigo" data-md-color-accent="Indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#formatos-de-audio-y-video" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="index.html" title="Gráficos y Multimedia" class="md-header__button md-logo" aria-label="Gráficos y Multimedia" data-md-component="logo">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gráficos y Multimedia
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Formatos de audio y vídeo
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Gráficos y Multimedia" class="md-nav__button md-logo" aria-label="Gráficos y Multimedia" data-md-component="logo">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    Gráficos y Multimedia
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Introducción
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Formatos de audio y vídeo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="formatos.html" class="md-nav__link md-nav__link--active">
        Formatos de audio y vídeo
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#audio-y-video-en-dispositivos-moviles" class="md-nav__link">
    Audio y vídeo en dispositivos móviles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatos-soportados" class="md-nav__link">
    Formatos soportados
  </a>
  
    <nav class="md-nav" aria-label="Formatos soportados">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formatos-de-audio-en-ios" class="md-nav__link">
    Formatos de audio en iOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatos-de-video-en-ios" class="md-nav__link">
    Formatos de vídeo en iOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatos-de-audio-y-video-en-android" class="md-nav__link">
    Formatos de audio y vídeo en Android
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perfiles-de-audio-y-video" class="md-nav__link">
    Perfiles de audio y vídeo
  </a>
  
    <nav class="md-nav" aria-label="Perfiles de audio y vídeo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perfil-general" class="md-nav__link">
    Perfil general
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perfil-de-alta-calidad" class="md-nav__link">
    Perfil de alta calidad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perfil-para-dispositivos-legacy" class="md-nav__link">
    Perfil para dispositivos legacy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-de-formato" class="md-nav__link">
    Conversión de formato
  </a>
  
    <nav class="md-nav" aria-label="Conversión de formato">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conversion-de-audio-con-afconvert" class="md-nav__link">
    Conversión de audio con afconvert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-con-vlc" class="md-nav__link">
    Conversión con VLC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-con-ffmpeg" class="md-nav__link">
    Conversión con ffmpeg
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    Ejercicios
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conversion-de-videos" class="md-nav__link">
    Conversión de vídeos
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="streaming.html" class="md-nav__link">
        Difusión de medios
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="unity.html" class="md-nav__link">
        El motor Unity
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="graficos-android.html" class="md-nav__link">
        Gráficos de alto rendimiento en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="graficos-ios.html" class="md-nav__link">
        Gráficos en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="reproduccion-ios.html" class="md-nav__link">
        Reproducción de medios en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="captura-ios.html" class="md-nav__link">
        Captura y procesamiento de medios en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="procesamiento-de-imagen-en-ios-opencv.html" class="md-nav__link">
        Procesamiento de imágenes en iOS - OpenCV
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="reproduccion-android.html" class="md-nav__link">
        Reproducción de medios en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="captura-android.html" class="md-nav__link">
        Captura de medios en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="procesamiento-android.html" class="md-nav__link">
        Emisión de medios
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="mirroring.html" class="md-nav__link">
        Reproducción en dispositivos externos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="adobe-air.html" class="md-nav__link">
        Aplicaciones Adobe Air
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="habla-android.html" class="md-nav__link">
        Síntesis y reconocimiento del habla
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#audio-y-video-en-dispositivos-moviles" class="md-nav__link">
    Audio y vídeo en dispositivos móviles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatos-soportados" class="md-nav__link">
    Formatos soportados
  </a>
  
    <nav class="md-nav" aria-label="Formatos soportados">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formatos-de-audio-en-ios" class="md-nav__link">
    Formatos de audio en iOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatos-de-video-en-ios" class="md-nav__link">
    Formatos de vídeo en iOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatos-de-audio-y-video-en-android" class="md-nav__link">
    Formatos de audio y vídeo en Android
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perfiles-de-audio-y-video" class="md-nav__link">
    Perfiles de audio y vídeo
  </a>
  
    <nav class="md-nav" aria-label="Perfiles de audio y vídeo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perfil-general" class="md-nav__link">
    Perfil general
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perfil-de-alta-calidad" class="md-nav__link">
    Perfil de alta calidad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perfil-para-dispositivos-legacy" class="md-nav__link">
    Perfil para dispositivos legacy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-de-formato" class="md-nav__link">
    Conversión de formato
  </a>
  
    <nav class="md-nav" aria-label="Conversión de formato">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conversion-de-audio-con-afconvert" class="md-nav__link">
    Conversión de audio con afconvert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-con-vlc" class="md-nav__link">
    Conversión con VLC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-con-ffmpeg" class="md-nav__link">
    Conversión con ffmpeg
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    Ejercicios
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conversion-de-videos" class="md-nav__link">
    Conversión de vídeos
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="formatos-de-audio-y-video">Formatos de audio y vídeo<a class="headerlink" href="#formatos-de-audio-y-video" title="Permanent link">&para;</a></h1>
<p>Una de las principales características de los dispositivos móviles es la gran heterogeneidad que existe entre los dispositivos existentes. Una de las repercusiones de este hecho es la necesidad de diseñar interfaces que se adapten a los diferentes tipos de pantalla (conocido como diseño <em>responsive</em>). Esto también tiene una fuerte repercusión en las funcionalidades multimedia de las aplicaciones. Deberemos ser capaces de proporcionar audio y vídeo compatible y de calidad.</p>
<h2 id="audio-y-video-en-dispositivos-moviles">Audio y vídeo en dispositivos móviles<a class="headerlink" href="#audio-y-video-en-dispositivos-moviles" title="Permanent link">&para;</a></h2>
<p>Existen diferentes formas de llevar audio y vídeo a los dispositivos móviles:</p>
<ul>
<li><em>Streaming</em>: El contenido multimedia se reproduce de forma remota. Se obtienen pequeños fragmentos del medio conforme se reproduce, pero nunca se llega a descargar un fichero entero.</li>
<li>Descarga progresiva: Descargamos un fichero de audio o vídeo mediante HTTP. El contenido multimedia se puede reproducir mientras se descarga el fichero.</li>
<li><em>Podcast</em>: Contienen contenido episódico. Encontramos diferentes aplicaciones que nos permiten suscribirnos a <em>podcasts</em>, y que se encargarán de descargar los últimos episodios de forma automática cuando contemos con red WiFi. De esta forma podremos reproducirlos <em>offline</em> posteriormente.</li>
<li>Incluido en la aplicación: Podemos distribuir ficheros de audio y vídeo con nuestras aplicaciones. En este caso no hará falta conectar a Internet para reproducir los medios, estarán almacenados localmente.</li>
</ul>
<p>En esta lista podemos ver ordenadas las formas de suministrar el contenido multimedia desde la más remota a la más local. Independientemente de cuál de estos mecanismos vayamos a utilizar, en primer lugar lo más importante será establecer un formato adecuado para el audio y el vídeo.</p>
<p><strong>Copiar vídeos a la tarjeta SD</strong></p>
<p>En esta sección veremos la manera de añadir archivos a la tarjeta de memoria de nuestro dispositivo virtual Android, de tal forma que podamos almacenar clips de vídeo. Se deben seguir los siguientes pasos:</p>
<ul>
<li>En primer lugar el emulador debe encontrarse en funcionamiento, y por supuesto, el dispositivo emulado debe hacer uso de una tarjeta SD.</li>
<li>En Android Studio debemos abrir la ventana <em>Android Device Monitor</em> . Para ello hacemos uso de la opción <em>Tools &gt; Android &gt; Android Device Monitor</em></li>
</ul>
<p><img alt="Android Device Monitor" src="imagenes/adm.png" /></p>
<ul>
<li>A continuación, en dicha ventana, seleccionamos la pestaña <em>File Explorer</em>. El contenido de la tarjeta de memoria se halla (normalmente) en la carpeta <code>/mnt/sdcard</code> o <code>storage/sdcard</code>.</li>
<li>Dentro de dicha carpeta deberemos introducir nuestros archivos de vídeo, dentro del directorio <em>DCIM</em>. Al hacer esto ya podrán reproducirse desde la aplicación nativa de
reproducción de vídeo y también desde nuestras propias aplicaciones.  Podemos introducir un archivo de video con el ratón, arrastrando un fichero desde otra carpeta al interior de
la carpeta <em>DCIM</em>, aunque también podemos hacer uso de los controles que aparecen en la parte superior derecha de la perspectiva <em>DDMS</em>, cuando la pestaña
<em>File Explorer</em> está seleccionada. La función de estos botones es, respectivamente: guardar en nuestra máquina real algún archivo de la tarjeta de memoria virtual, guardar en
la tarjeta de memoria virtual un archivo, y eliminar el archivo seleccionado.</li>
</ul>
<p><img alt="Intercambio de ficheros con la tarjeta de memoria virtual" src="imagenes/tarjetasd.png" /></p>
<blockquote>
<p>A veces es necesario volver a arrancar el terminal emulado para poder acceder a los vídeos insertados en la tarjeta de memoria desde la aplicación <em>Galería</em> de Android.</p>
</blockquote>
<h2 id="formatos-soportados">Formatos soportados<a class="headerlink" href="#formatos-soportados" title="Permanent link">&para;</a></h2>
<p>En primer lugar vamos a estudiar los formatos soportados por cada plataforma, sus características, y cuáles son los más adecuados a utilizar en cada caso.</p>
<h3 id="formatos-de-audio-en-ios">Formatos de audio en iOS<a class="headerlink" href="#formatos-de-audio-en-ios" title="Permanent link">&para;</a></h3>
<p>Entre los formatos de audio soportados en iOS encontramos formatos con un sistema de compresión complejo para el cual contamos con hardware específico que se encarga de realizar la descompresión, y de esta forma liberar la CPU de esta tarea. Estos formatos son:</p>
<ul>
<li>AAC (MPEG-4 Advanced Audio Coding)</li>
<li>ALAC (Apple Lossless)</li>
<li>HE-AAC (MPEG-4 High Efficiency AAC, sin descompresor <em>software</em>)</li>
<li>MP3 (MPEG-1 audio layer 3)</li>
</ul>
<p>Con estos formatos podemos conseguir un alto nivel de compresión, y gracias al <em>hardware</em> de descompresión con el que está equipado el dispositivo pueden reproducirse de forma eficiente sin bloquear otras tareas. Sin embargo, dicho <em>hardware</em> sólo puede soportar la reproducción simultánea de un fichero de audio.</p>
<p>Si queremos reproducir varios ficheros simultáneamente, el resto de ficheros deberán ser descomprimidos por <em>software</em>, lo cuál supone una gran carga para la CPU. Debemos evitar que esto ocurra. Por lo tanto, los formatos anteriores deberán ser utilizados únicamente cuando no se vaya a reproducir más de un fichero de estos tipos simultáneamente.</p>
<p>Por otro lado, contamos con soporte para formatos sin compresión, o con una compresión sencilla. Estos formatos son:</p>
<ul>
<li>Linear PCM (sin compresión)</li>
<li>IMA4 (IMA/ADPCM)</li>
<li>iLBC (internet Low Bitrate Codec, formato para transmisión del habla)</li>
<li>µ-law and a-law</li>
</ul>
<p>En estos casos no hay ningún problema en reproducir varios ficheros simultáneamente, ya que o no es
necesarios descomprimirlos, como el caso de PCM, o su descompresión no supone apenas carga para la CPU,
como el resto de casos.</p>
<p>Si no tenemos problemas de espacio, el formato PCM será el más adecuado, concretamente el tipo LEI16
(<em>Little-Endian Integer 16-bit</em>). En caso contrario, podemos
utilizar AAC para la música de fondo (una única instancia simultánea, ya que se descodifica por <em>hardware</em>),
e IMA4 para los efectos especiales, ya que nos permite reproducir varias instancias simultáneas con un bajo
coste.</p>
<p>Podemos utilizar también diferentes tipos de fichero para el audio, como <code>.wav</code>,
<code>.mp3</code>, <code>.aac</code>, <code>.aiff</code> o <code>.caf</code>. El tipo de fichero
preferido es este último (<code>.caf</code>, <em>Core Audio File Format</em>), ya que puede contener cualquier codificación de audio
de las vistas anteriormente.</p>
<h3 id="formatos-de-video-en-ios">Formatos de vídeo en iOS<a class="headerlink" href="#formatos-de-video-en-ios" title="Permanent link">&para;</a></h3>
<p>Los formatos de video soportados
son todos aquellos ficheros con extension <code>mov</code>, <code>mp4</code>, <code>m4v</code>, y <code>3gp</code>
que cumplan las siguientes restricciones de codificación:</p>
<ul>
<li>H.264, hasta 1.5 Mbps, 640 x 480, 30 fps, versión de baja complejidad del H.264 <em>Baseline Profile</em> con
audio AAC-LC de hasta 160 Kbps, 48 kHz, stereo</li>
<li>H.264, hasta 768 Kbps, 320 x 240, 30 fps, <em>Baseline Profile</em> hasta nivel 1.3 con audio AAC-LC de hasta
160 Kbps, 48 kHz, stereo</li>
<li>MPEG-4, hasta 2.5 Mbps, 640 x 480, 30 frames per second, <em>Simple Profile</em> con audio AAC-LC de hasta 160 Kbps,
48 kHz, stereo</li>
</ul>
<p>Estos formatos están soportados por todos los dispositivos iOS. A partir de iPhone 4 y iPad se soportan además:</p>
<ul>
<li>H.264 hasta 720p, 30 fps, Main Profile nivel 3.1. Audio AAC-LC de hasta 160 Kbps, 48kHz, stereo.</li>
</ul>
<p>A partir de iPhone 5 se añade:</p>
<ul>
<li>H.264 hasta 1080p, 30 fps, High Profile nivel 4.1. Audio AAC-LC de hasta 160 Kbps, 48kHz, stereo.</li>
</ul>
<p>Se dispone de más información en la documentación sobre iOS Media Layer:</p>
<p>https://developer.apple.com/library/ios/documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html</p>
<h3 id="formatos-de-audio-y-video-en-android">Formatos de audio y vídeo en Android<a class="headerlink" href="#formatos-de-audio-y-video-en-android" title="Permanent link">&para;</a></h3>
<p>Android incorpora la posibilidad de reproducir tanto audio como vídeo en diversos formatos. Los formatos de audio soportados son los siguientes:</p>
<ul>
<li>AAC LC/LT</li>
<li>HE-AACv1 (AAC+)</li>
<li>HE-AACv2 (Enhanced ACC+)</li>
<li>AAC ELD</li>
<li>AMR-NB</li>
<li>AMR-WB</li>
<li>FLAC</li>
<li>MP3</li>
<li>MIDI</li>
<li>Ogg Vorbis</li>
<li>PCM/Wave</li>
</ul>
<p>Con respecto al vídeo, los formatos soportados son:</p>
<ul>
<li>H.263</li>
<li>H.264 AVC</li>
<li>MPEG-4 SP</li>
<li>VP8</li>
</ul>
<p>Para más información sobre los formatos de audio y vídeo soportados en Android se puede consultar la siguiente página:</p>
<p>https://developer.android.com/guide/appendix/media-formats.html</p>
<h2 id="perfiles-de-audio-y-video">Perfiles de audio y vídeo<a class="headerlink" href="#perfiles-de-audio-y-video" title="Permanent link">&para;</a></h2>
<p>A partir de la información anterior es difícil establecer un perfil general de vídeo que esté soportado por todos los dispositivos y al mismo tiempo aproveche sus características, pero si que podemos obtener una serie de perfiles orientados a determinadas familia de dispositivos.</p>
<p>Podemos observar que la codificación de vídeo y audio que mayor compatibilidad y calidad nos proporciona es H.264 y AAC respectivamente. Por lo tanto, basaremos los perfiles en estos <em>codecs</em>.</p>
<h3 id="perfil-general">Perfil general<a class="headerlink" href="#perfil-general" title="Permanent link">&para;</a></h3>
<p>Si queremos tener vídeo compatible con la mayoría de los dispositivos actuales podemos utilizar un perfil como el siguiente:</p>
<ul>
<li>Vídeo H.264 Baseline profile
<strong> Resolución de 480 x 320
</strong> <em>Framerate</em> de 30 fps
** _Bitrate de 1500 kbps</li>
<li>Audio AAC
<strong> <em>Sample rate</em> de 44100 kHz
</strong> <em>Bitrate</em> de 128 kbps</li>
</ul>
<h3 id="perfil-de-alta-calidad">Perfil de alta calidad<a class="headerlink" href="#perfil-de-alta-calidad" title="Permanent link">&para;</a></h3>
<p>El perfil anterior no aprovechará las características de aquellos dispositivos que soporten vídeo HD. Por ello es conveniente definir otro perfil para los dispositivos más avanzados:</p>
<ul>
<li>Vídeo H.264 Baseline profile
<strong> Resolución de 1280 x 720
</strong> <em>Framerate</em> de 30 fps
** _Bitrate de 5000 kbps</li>
<li>Audio AAC
<strong> <em>Sample rate</em> de 48000 kHz
</strong> <em>Bitrate</em> de 160 kbps</li>
</ul>
<h3 id="perfil-para-dispositivos-legacy">Perfil para dispositivos <em>legacy</em><a class="headerlink" href="#perfil-para-dispositivos-legacy" title="Permanent link">&para;</a></h3>
<p>Normalmente con los dos perfiles anteriores debería ser suficiente, pero en algunos casos puede interesarnos también dirigirnos a dispositivos <em>legacy</em> (no <em>smartphones</em>). En este caso podemos crear un perfil limitado como el siguiente:</p>
<ul>
<li>Vídeo 3GP, codificación MPEG-4 (parte 2)
<strong> Resolución entre 176 x 144 y 320 x 240
</strong> <em>Framerate</em> entre 5 y 15 fps
** _Bitrate entre 52 y 192 kbps</li>
<li>Audio AAC-LC (<em>Low Complexity</em>)
<strong> <em>Sample rate</em> de 16000 kHz
</strong> <em>Bitrate</em> entre 16 y 24 kbps</li>
</ul>
<h2 id="conversion-de-formato">Conversión de formato<a class="headerlink" href="#conversion-de-formato" title="Permanent link">&para;</a></h2>
<p>Vamos a ver ahora cómo convertir el audio y vídeo al formato deseado.</p>
<h3 id="conversion-de-audio-con-afconvert">Conversión de audio con <code>afconvert</code><a class="headerlink" href="#conversion-de-audio-con-afconvert" title="Permanent link">&para;</a></h3>
<p>En MacOS contamos con la herramienta <code>afconvert</code>, que nos permite convertir el audio a los diferentes formatos soportados por la plataforma. Se trata de una herramienta en línea de comando que se utiliza de la siguiente forma:</p>
<div class="highlight"><pre><span></span><code>afconvert<span class="w"> </span>-d<span class="w"> </span><span class="o">[</span>out<span class="w"> </span>data<span class="w"> </span>format<span class="o">]</span><span class="w"> </span>-f<span class="w"> </span><span class="o">[</span>out<span class="w"> </span>file<span class="w"> </span>format<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="k">in</span><span class="w"> </span>file<span class="o">]</span><span class="w"> </span><span class="o">[</span>out<span class="w"> </span>file<span class="o">]</span>
</code></pre></div>
<p>Por ejemplo, en caso de querer convertir el audio al formato preferido (PCM LEI16 en un fichero <code>.caf</code>),
utilizaremos el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>afconvert<span class="w"> </span>-f<span class="w"> </span>caff<span class="w"> </span>-d<span class="w"> </span>LEI16<span class="w"> </span>sonido.wav<span class="w"> </span>sonido.caf
</code></pre></div>
<p>También podemos utilizar esta herramienta para convertir a formatos con compresión. En tal caso, deberemos
especificar el <em>bit-rate</em> del fichero resultante:</p>
<div class="highlight"><pre><span></span><code>afconvert<span class="w"> </span>-f<span class="w"> </span>caff<span class="w"> </span>-d<span class="w"> </span>aac<span class="w"> </span>-b<span class="w"> </span><span class="m">131072</span><span class="w"> </span>musica.caf<span class="w"> </span>musica.caf
</code></pre></div>
<p>También contamos con herramientas para reproducir audio en línea de comando, y para obtener información sobre un fichero de audio. Estas herramientas son <code>afplay</code> y <code>afinfo</code>.</p>
<h3 id="conversion-con-vlc">Conversión con VLC<a class="headerlink" href="#conversion-con-vlc" title="Permanent link">&para;</a></h3>
<p>Podemos utilizar VLC para convertir audio y vídeo tanto mediante un asistente de la aplicación como mediante línea de comando. En primer lugar mostramos diferentes <em>codecs</em> de audio y vídeo y formatos de encapsulamiento que podemos utilizar:</p>
<p><em>Codecs</em> de video:</p>
<table>
<thead>
<tr>
<th align="left"><code>vcodec</code></th>
<th align="left">Codec de vídeo</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>mp1v</code></td>
<td align="left">MPEG-1</td>
</tr>
<tr>
<td align="left"><code>mp2v</code></td>
<td align="left">MPEG-2</td>
</tr>
<tr>
<td align="left"><code>mp4v</code></td>
<td align="left">MPEG-4</td>
</tr>
<tr>
<td align="left"><code>h263</code></td>
<td align="left">H.263</td>
</tr>
<tr>
<td align="left"><code>h264</code></td>
<td align="left">H.264</td>
</tr>
<tr>
<td align="left"><code>theo</code></td>
<td align="left">Theora</td>
</tr>
<tr>
<td align="left"><code>VP8</code></td>
<td align="left">VP8 Video</td>
</tr>
</tbody>
</table>
<p><em>Codecs</em> de audio:</p>
<table>
<thead>
<tr>
<th align="left"><code>acodec</code></th>
<th align="left">Codec de audio</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>mpga</code></td>
<td align="left">MPEG Audio</td>
</tr>
<tr>
<td align="left"><code>mp3</code></td>
<td align="left">MPEG Layer 3</td>
</tr>
<tr>
<td align="left"><code>mp4a</code></td>
<td align="left">MP4 Audio</td>
</tr>
<tr>
<td align="left"><code>vorb</code></td>
<td align="left">Vorbis</td>
</tr>
</tbody>
</table>
<p>Formatos de fichero (encapsulamiento):</p>
<table>
<thead>
<tr>
<th align="left"><code>mux</code></th>
<th align="left">Formato de fichero</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>mpg1</code></td>
<td align="left">MPEG-1</td>
</tr>
<tr>
<td align="left"><code>ts</code></td>
<td align="left">MPEG-TS</td>
</tr>
<tr>
<td align="left"><code>ps</code></td>
<td align="left">MPEG-PS</td>
</tr>
<tr>
<td align="left"><code>mp4</code></td>
<td align="left">MPEG-4</td>
</tr>
<tr>
<td align="left"><code>avi</code></td>
<td align="left">AVI</td>
</tr>
<tr>
<td align="left"><code>ogg</code></td>
<td align="left">OGG</td>
</tr>
<tr>
<td align="left"><code>dummy</code></td>
<td align="left">MP3</td>
</tr>
<tr>
<td align="left"><code>wav</code></td>
<td align="left">WAVE</td>
</tr>
</tbody>
</table>
<p>Podemos realizar la conversión en línea de comando de la siguiente forma:</p>
<div class="highlight"><pre><span></span><code>vlc<span class="w"> </span>-I<span class="w"> </span>dummy<span class="w"> </span>/&lt;ruta_origen&gt;/video.mpg<span class="w"> </span>:sout<span class="o">=</span><span class="s1">&#39;#transcode{vcodec=mp2v, </span>
<span class="s1">vb=4096,acodec=mp2a,ab=192,scale=1,channels=2,deinterlace,audio-</span>
<span class="s1">sync}:std{access=file,mux=ps,dst=/&lt;ruta_destino&gt;/video.mpg&#39;</span><span class="w"> </span>vlc://quit
</code></pre></div>
<p>Donde <code>ab</code> indica el <em>bitrate</em> de audio, y <code>vb</code> el <em>bitrate</em> de vídeo.</p>
<p>También podemos hacer la conversión desde la aplicación VLC, con la opción <em>Archivo &gt; Convertir / Emitir ...</em>.</p>
<h3 id="conversion-con-ffmpeg">Conversión con <code>ffmpeg</code><a class="headerlink" href="#conversion-con-ffmpeg" title="Permanent link">&para;</a></h3>
<p>Una de las aplicaciones que mayor flexibilidad nos da para convertir audio y vídeo es <code>ffmpeg</code>. La forma más básica de lanzar esta herramienta es como se muestra a continuación:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>entrada.ext<span class="w"> </span>salida.ext
</code></pre></div>
<p>En este caso la codificación de audio y vídeo se induce a partir de la extensión especificada en el nombre del fichero de salida.</p>
<p>Podemos especificar con precisión el formato del fichero de salida con los siguientes parámetros:</p>
<table>
<thead>
<tr>
<th align="left">Característica</th>
<th align="left">Parámetro</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Formato de fichero</td>
<td align="left"><code>-f avi</code></td>
</tr>
<tr>
<td align="left">Resolución</td>
<td align="left"><code>-s 640x480</code></td>
</tr>
<tr>
<td align="left">Fotogramas por segundo</td>
<td align="left"><code>-r 24</code></td>
</tr>
<tr>
<td align="left"><em>Codec</em> de audio</td>
<td align="left"><code>-c:a / -acodec aac</code></td>
</tr>
<tr>
<td align="left"><em>Codec</em> de vídeo</td>
<td align="left"><code>-c:v / vcodec h264</code></td>
</tr>
<tr>
<td align="left"><em>Bitrate</em> de audio</td>
<td align="left"><code>-b:a 128k</code></td>
</tr>
<tr>
<td align="left"><em>Bitrate</em> de vídeo</td>
<td align="left"><code>-b:v 1500k</code></td>
</tr>
<tr>
<td align="left">Frecuencia de audio</td>
<td align="left"><code>-ar 44100</code></td>
</tr>
<tr>
<td align="left">Canales de audio</td>
<td align="left"><code>-ac 2</code></td>
</tr>
<tr>
<td align="left">Perfil</td>
<td align="left"><code>-profile:v baseline</code></td>
</tr>
</tbody>
</table>
<p>Podemos ver todos los formatos de fichero disponibles con:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-formats
</code></pre></div>
<p>También podemos ver los códecs disponibles con:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-codecs
</code></pre></div>
<p>En caso de utilizar vídeo H.264 podemos especificar también el perfil y su nivel:</p>
<table>
<thead>
<tr>
<th align="left">Perfil</th>
<th align="left">Parámetros</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Baseline 3.0</td>
<td align="left"><code>-profile:v baseline -level 3.0</code></td>
</tr>
<tr>
<td align="left">Baseline 3.1</td>
<td align="left"><code>-profile:v baseline -level 3.1</code></td>
</tr>
<tr>
<td align="left">Main 3.1</td>
<td align="left"><code>-profile:v main -level 3.1</code></td>
</tr>
<tr>
<td align="left">Main 4.0</td>
<td align="left"><code>-profile:v main -level 4.0</code></td>
</tr>
<tr>
<td align="left">High 4.0</td>
<td align="left"><code>-profile:v high -level 4.0</code></td>
</tr>
<tr>
<td align="left">High 4.1</td>
<td align="left"><code>-profile:v high -level 4.1</code></td>
</tr>
</tbody>
</table>
<p>El siguiente ejemplo convierte un vídeo MPEG-2 a formato H.264/AAC con perfil <em>baseline</em> 3.0:</p>
<div class="highlight"><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>entrada.m2ts
<span class="w">       </span>-strict<span class="w"> </span>-2
<span class="w">       </span>-vcodec<span class="w"> </span>h264
<span class="w">       </span>-s<span class="w"> </span>480x320
<span class="w">       </span>-b:v<span class="w"> </span>1500k
<span class="w">       </span>-profile:v<span class="w"> </span>baseline<span class="w"> </span>-level<span class="w"> </span><span class="m">3</span>.0
<span class="w">       </span>-acodec<span class="w"> </span>aac
<span class="w">       </span>-ar<span class="w"> </span><span class="m">22050</span>
<span class="w">       </span>-b:a<span class="w"> </span>128k
<span class="w">       </span>-ac<span class="w"> </span><span class="m">2</span>
<span class="w">       </span>salida.mp4
</code></pre></div>
<h2 id="ejercicios">Ejercicios<a class="headerlink" href="#ejercicios" title="Permanent link">&para;</a></h2>
<h3 id="conversion-de-videos">Conversión de vídeos<a class="headerlink" href="#conversion-de-videos" title="Permanent link">&para;</a></h3>
<p>En los recursos de la sesión encontramos una serie de vídeos que podremos utilizar en nuestras aplicaciones. Todos estos vídeos se encuentran en 1080p, por lo que para poder reproducirlos correctamente en cualquier móvil antes deberemos convertirlos a un formato adecuado.</p>
<p>Utiliza un perfil estándar que nos permita suministrar estos vídeos a la gran mayoría de dispositivos utilizados en la actualidad. Prueba a reproducir estos vídeos desde el dispositivo Android introduciéndolos en la tarjeta SD.</p>
<blockquote>
<p>Ayuda: Puedes copiar los vídeos a la tarjeta SD desde <em>Android Device Monitor</em>. Dentro de esta ventana, selecciona la pestaña <em>File Explore</em> en la ventana central y ahí podrás subir o descargar ficheros del dispositivo.</p>
</blockquote>
<p>Por ejemplo, puedes copiar el video en la carpeta <code>/mnt/sdcard</code> (o similar). En tal caso, para abrirlo puedes ir al navegador del dispositivo y poner como URL:</p>
<div class="highlight"><pre><span></span><code>file:///mnt/sdcard/video.mp4
</code></pre></div>
<blockquote>
<p>ATENCIÓN: El acceso a las URLs de tipo <code>file:</code> está soportado a partir de Android 2.1.</p>
</blockquote>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="assets/javascripts/bundle.b78d2936.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>