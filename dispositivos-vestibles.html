
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Dispositivos vestibles - Gráficos y Multimedia</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="Indigo" data-md-color-accent="Indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dispositivos-vestibles" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="index.html" title="Gráficos y Multimedia" class="md-header__button md-logo" aria-label="Gráficos y Multimedia" data-md-component="logo">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gráficos y Multimedia
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dispositivos vestibles
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Gráficos y Multimedia" class="md-nav__button md-logo" aria-label="Gráficos y Multimedia" data-md-component="logo">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    Gráficos y Multimedia
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Introducción
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="formatos.html" class="md-nav__link">
        Formatos de audio y vídeo
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="streaming.html" class="md-nav__link">
        Difusión de medios
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="unity.html" class="md-nav__link">
        El motor Unity
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="graficos-android.html" class="md-nav__link">
        Gráficos de alto rendimiento en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="graficos-ios.html" class="md-nav__link">
        Gráficos en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="reproduccion-ios.html" class="md-nav__link">
        Reproducción de medios en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="captura-ios.html" class="md-nav__link">
        Captura y procesamiento de medios en iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="procesamiento-de-imagen-en-ios-opencv.html" class="md-nav__link">
        Procesamiento de imágenes en iOS - OpenCV
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="reproduccion-android.html" class="md-nav__link">
        Reproducción de medios en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="captura-android.html" class="md-nav__link">
        Captura de medios en Android
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="procesamiento-android.html" class="md-nav__link">
        Emisión de medios
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="mirroring.html" class="md-nav__link">
        Reproducción en dispositivos externos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="adobe-air.html" class="md-nav__link">
        Aplicaciones Adobe Air
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="habla-android.html" class="md-nav__link">
        Síntesis y reconocimiento del habla
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#google-glass" class="md-nav__link">
    Google Glass
  </a>
  
    <nav class="md-nav" aria-label="Google Glass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#triggers-de-voz" class="md-nav__link">
    Triggers de voz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tarjetas" class="md-nav__link">
    Tarjetas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relojes" class="md-nav__link">
    Relojes
  </a>
  
    <nav class="md-nav" aria-label="Relojes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-del-emulador" class="md-nav__link">
    Creación del emulador
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-un-proyecto" class="md-nav__link">
    Creación de un proyecto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comandos-de-voz" class="md-nav__link">
    Comandos de voz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interfaz-de-usuario" class="md-nav__link">
    Interfaz de usuario
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="dispositivos-vestibles">Dispositivos vestibles<a class="headerlink" href="#dispositivos-vestibles" title="Permanent link">&para;</a></h1>
<p>Existen distintos tipos de dispositivos que actúan como complementos a los teléfonos móviles y <em>tables</em>, como por ejemplo relojes y gafas, que son conocidos como dispositivos vestibles (<em>wearable devices</em>).</p>
<p>Estos dispositivos cuentan con una interfaz más limitada, con una pantalla más reducida y sin la posibilidad de mostrar un teclado táctil, pero nos permiten tener un acceso más rápido a información básica, como por ejemplo a notificaciones que recibamos en el móvil.</p>
<p>Vamos a estudiar estos dispositivos mediante dos ejemplos: los relojes Android y las <em>Google Glass</em>. En ambos casos, suple las limitaciones de la interfaz con:</p>
<ul>
<li><strong>Comandos de voz</strong> que podemos utilizar para lanzar las aplicaciones.</li>
<li>Interfaz basadas en <strong>tarjetas</strong> (<em>cards</em>).</li>
<li><strong>Gestos</strong> para navegar por la aplicación.</li>
</ul>
<h2 id="google-glass">Google Glass<a class="headerlink" href="#google-glass" title="Permanent link">&para;</a></h2>
<p>El desarrollo de aplicaciones para <em>Google Glass</em> se realiza utilizando <em>Glass Development Kit (GDK)</em> que se encuentra bajo la API 19.</p>
<p>En primer lugar deberemos entrar en <em>Android SDK Manager</em> y nos aseguramos de que en el bloque <em>Android 4.4.2 (API 19) tengamos instalado el _item</em> <em>Glass Development Kit Preview</em>. En caso de no tenerlo instalado, lo instalaremos.</p>
<p><img alt="Instalación de GDK" src="imagenes/gg-gdk.png" /></p>
<p>Una vez instalado GDK, para crear un proyecto para <em>Glass</em> deberemos crear un nuevo <em>Android Application Project</em> y en el bloque <em>Compile With</em> seleccionaremos <em>Glass Development Kit Preview (Google Inc.) (API 19)</em>.</p>
<p><img alt="Crear proyecto para Glass" src="imagenes/gg-compilewith.png" /></p>
<blockquote>
<p>Aunque el proyecto para Google Glass se puede crear con Eclipse + ADT como hemos visto, tendremos mayores facilidades si utilizamos Android Studio, ya que nos permite crear una plantilla específica para este tipo de proyectos.</p>
</blockquote>
<p>Al desarrollar aplicaciones con GDK contaremos con la API de Android y con algunas clases adicionales incluidas en GDK como por ejemplo reconocer los gestos habituales en las aplicaciones para estos dispositivos, crear y mostrar tarjetas, o lanzar actividades con comandos de voz.</p>
<p>Vamos a ver a continuación los elementos principales que debería tener una aplicación destinada a las <em>Google Glass</em>.</p>
<h3 id="triggers-de-voz"><em>Triggers</em> de voz<a class="headerlink" href="#triggers-de-voz" title="Permanent link">&para;</a></h3>
<p>Dado que una de las ventajas de las <em>Google Glass</em> es poder utilizarlas sin ocupar las manos, será importante dar la posibilidad de lanzar nuestras actividades mediante comandos de voz. Esto se hará pronunciando <em>"Ok glass"</em> seguido de la aplicación que queremos ejecutar.</p>
<p><img alt="Lanzar aplicaciones por comandos de voz" src="imagenes/gg-okglass.jpg" /></p>
<p>Para implementar esta funcionalidad, en la declaración de nuestra actividad en <code>AndroidManifest.xml</code> añadiremos un <code>&lt;intent-filter&gt;</code> de tipo <code>VOICE_TRIGGER</code>, y una etiqueta <code>&lt;meta-data&gt;</code> con la que indicaremos cuál será el comando de voz que podrá lanzar la actividad:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;activity</span>
<span class="w">    </span><span class="na">android:name=</span><span class="s">&quot;ua.es.jtech.glass.MainActivity&quot;</span>
<span class="w">    </span><span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;intent-filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;com.google.android.glass.action.VOICE_TRIGGER&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/intent-filter&gt;</span>

<span class="w">    </span><span class="nt">&lt;meta-data</span>
<span class="w">        </span><span class="na">android:name=</span><span class="s">&quot;com.google.android.glass.VoiceTrigger&quot;</span>
<span class="w">        </span><span class="na">android:resource=</span><span class="s">&quot;@xml/voice_trigger_start&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/activity&gt;</span>
</code></pre></div>
<p>Los datos sobre el <em>trigger</em> a utilizar se definen en el fichero <code>res/xml/voice_trigger_start.xml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;trigger</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;START_BROADCASTING&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Tenemos una serie de <em>triggers</em> predefinidos para lanzar la aplicación. Por ejemplo, en el caso anterior nuestra actividad se abrirá cuando pronunciemos <em>"Ok glass"</em> seguido del comando <em>"Start broadcasting"</em>.</p>
<p>Podemos obtener la lista de posibles comandos de voz consultando la lista de elementos de la enumeración <code>VoiceTriggers.Command</code> de GDK:</p>
<p>https://developers.google.com/glass/develop/gdk/reference/com/google/android/glass/app/VoiceTriggers.Command</p>
<h3 id="tarjetas">Tarjetas<a class="headerlink" href="#tarjetas" title="Permanent link">&para;</a></h3>
<p>La interfaz de las aplicaciones Google Glass normalmente se componen de una serie de tarjetas, que habitualmente tienen fondo negro y texto blanco. Podemos definirlas en XML o de forma programada mediante <code>CardBuilder</code></p>
<p><img alt="Tarjeta de Google Glass" src="imagenes/gg-card.png" /></p>
<h4 id="tarjetas-con-cardbuilder">Tarjetas con <code>CardBuilder</code><a class="headerlink" href="#tarjetas-con-cardbuilder" title="Permanent link">&para;</a></h4>
<p>La clase <code>CardBuilder</code> nos permite construir tarjetas que se ajusten a la disposición recomendada. Tenemos definidos diferentes posibles <em>layouts</em> en <code>CardBuilder.Layout</code> que podremos aplicar a las tarjetas en el momento de su creación.</p>
<div class="highlight"><pre><span></span><code><span class="n">View</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CardBuilder</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">CardBuilder</span><span class="p">.</span><span class="na">Layout</span><span class="p">.</span><span class="na">TEXT</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="s">&quot;Texto del contenido de la tarjeta&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">setFootnote</span><span class="p">(</span><span class="s">&quot;Nota a pie&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">setTimestamp</span><span class="p">(</span><span class="s">&quot;ahora&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">getView</span><span class="p">();</span>
</code></pre></div>
<p>Una vez obtenida la vista de la tarjeta, podremos añadirla como contenido a la actividad o bien a un objeto <code>CardScrollView</code> para así poder navegar a través de varias tarjetas mediante <em>scroll</em>.</p>
<h4 id="tarjetas-en-xml">Tarjetas en XML<a class="headerlink" href="#tarjetas-en-xml" title="Permanent link">&para;</a></h4>
<p>Si ninguno de los <em>layout</em> definidos en <code>CardBuilder.Layout</code> se ajusta a nuestras necesidades, podemos crear nuestras propias tarjetas en XML.</p>
<p>Para definir el <em>layout</em> de las tarjetas en XML podemos definir una serie de dimensiones estándar en el fichero <code>res/values/dimens.xml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="nt">&lt;resources&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Margen recomendado para los bordes de la tarjeta. --&gt;</span>
<span class="w">    </span><span class="nt">&lt;dimen</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;glass_card_margin&quot;</span><span class="nt">&gt;</span>40px<span class="nt">&lt;/dimen&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Margen recomendado entre la parte inferior de la tarjeta</span>
<span class="cm">         y el pie. Se ajusta de forma que la linea de base del texto</span>
<span class="cm">         del pie se situe a 40px de la parte inferior de la tarjeta.</span>
<span class="cm">    --&gt;</span>
<span class="w">    </span><span class="nt">&lt;dimen</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;glass_card_footer_margin&quot;</span><span class="nt">&gt;</span>33px<span class="nt">&lt;/dimen&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Margen recomendado para la columna izquierda. --&gt;</span>
<span class="w">    </span><span class="nt">&lt;dimen</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;glass_card_two_column_margin&quot;</span><span class="nt">&gt;</span>30px<span class="nt">&lt;/dimen&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Maxima altura del contenido del cuerpo de la tarjeta. --&gt;</span>
<span class="w">    </span><span class="nt">&lt;dimen</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;glass_card_body_height&quot;</span><span class="nt">&gt;</span>240px<span class="nt">&lt;/dimen&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Anchura de la columna izquierda. --&gt;</span>
<span class="w">    </span><span class="nt">&lt;dimen</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;glass_card_left_column_width&quot;</span><span class="nt">&gt;</span>240px<span class="nt">&lt;/dimen&gt;</span>

<span class="nt">&lt;/resources&gt;</span>
</code></pre></div>
<p>Una vez definidas estas dimensiones, podemos utilizar el siguiente <em>layout</em> como plantilla para las tarjetas:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;FrameLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
<span class="w">    </span><span class="na">android:id=</span><span class="s">&quot;@+id/layout&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;RelativeLayout</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/body_layout&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;@dimen/glass_card_body_height&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginLeft=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginTop=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginRight=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">tools:ignore=</span><span class="s">&quot;UselessLeaf&quot;</span>
<span class="w">        </span><span class="nt">&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- Introducir aquí el contenido de la tarjeta. --&gt;</span>

<span class="w">    </span><span class="nt">&lt;/RelativeLayout&gt;</span>

<span class="w">    </span><span class="nt">&lt;LinearLayout</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/footer_container&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:layout_gravity=</span><span class="s">&quot;bottom|left&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginLeft=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginBottom=</span><span class="s">&quot;@dimen/glass_card_footer_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginRight=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
<span class="w">        </span><span class="nt">&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:id=</span><span class="s">&quot;@+id/footer&quot;</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">&quot;0dip&quot;</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">            </span><span class="na">android:layout_weight=</span><span class="s">&quot;1&quot;</span>
<span class="w">            </span><span class="na">android:ellipsize=</span><span class="s">&quot;end&quot;</span>
<span class="w">            </span><span class="na">android:singleLine=</span><span class="s">&quot;true&quot;</span>
<span class="w">            </span><span class="na">android:textAppearance=</span><span class="s">&quot;?android:attr/textAppearanceSmall&quot;</span>
<span class="w">            </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:id=</span><span class="s">&quot;@+id/timestamp&quot;</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">            </span><span class="na">android:layout_marginLeft=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">            </span><span class="na">android:ellipsize=</span><span class="s">&quot;end&quot;</span>
<span class="w">            </span><span class="na">android:singleLine=</span><span class="s">&quot;true&quot;</span>
<span class="w">            </span><span class="na">android:textAppearance=</span><span class="s">&quot;?android:attr/textAppearanceSmall&quot;</span>
<span class="w">            </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;/LinearLayout&gt;</span>

<span class="nt">&lt;/FrameLayout&gt;</span>
</code></pre></div>
<p>En este <em>layout</em> tenemos una sección principal de contenido, y además también podemos introducir un pie y un <em>timestamp</em>.</p>
<p>Podemos también crear tarjetas con dos columnas utilizando la siguiente plantilla:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;RelativeLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;RelativeLayout</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/left_column&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;@dimen/glass_card_left_column_width&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">        </span><span class="nt">&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- Introducir contenido de la columna izquierda. --&gt;</span>

<span class="w">    </span><span class="nt">&lt;/RelativeLayout&gt;</span>

<span class="w">    </span><span class="nt">&lt;RelativeLayout</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;@dimen/glass_card_body_height&quot;</span>
<span class="w">        </span><span class="na">android:layout_alignParentRight=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">android:layout_alignParentTop=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginLeft=</span><span class="s">&quot;@dimen/glass_card_two_column_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginRight=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginTop=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_toRightOf=</span><span class="s">&quot;@+id/left_column&quot;</span>
<span class="w">        </span><span class="na">tools:ignore=</span><span class="s">&quot;UselessLeaf&quot;</span>
<span class="w">        </span><span class="nt">&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- Introducir contenido de la columna derecha. --&gt;</span>

<span class="w">    </span><span class="nt">&lt;/RelativeLayout&gt;</span>

<span class="w">    </span><span class="nt">&lt;LinearLayout</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/footer_container&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:layout_alignParentBottom=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">android:layout_alignParentRight=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">android:layout_gravity=</span><span class="s">&quot;bottom|left&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginBottom=</span><span class="s">&quot;@dimen/glass_card_footer_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginLeft=</span><span class="s">&quot;@dimen/glass_card_two_column_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_marginRight=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">        </span><span class="na">android:layout_toRightOf=</span><span class="s">&quot;@+id/left_column&quot;</span>
<span class="w">        </span><span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
<span class="w">        </span><span class="nt">&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:id=</span><span class="s">&quot;@+id/footer&quot;</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">&quot;0dip&quot;</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">            </span><span class="na">android:layout_weight=</span><span class="s">&quot;1&quot;</span>
<span class="w">            </span><span class="na">android:ellipsize=</span><span class="s">&quot;end&quot;</span>
<span class="w">            </span><span class="na">android:singleLine=</span><span class="s">&quot;true&quot;</span>
<span class="w">            </span><span class="na">android:textAppearance=</span><span class="s">&quot;?android:attr/textAppearanceSmall&quot;</span>
<span class="w">            </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:id=</span><span class="s">&quot;@+id/timestamp&quot;</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">            </span><span class="na">android:layout_marginLeft=</span><span class="s">&quot;@dimen/glass_card_margin&quot;</span>
<span class="w">            </span><span class="na">android:ellipsize=</span><span class="s">&quot;end&quot;</span>
<span class="w">            </span><span class="na">android:singleLine=</span><span class="s">&quot;true&quot;</span>
<span class="w">            </span><span class="na">android:textAppearance=</span><span class="s">&quot;?android:attr/textAppearanceSmall&quot;</span>
<span class="w">            </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;/LinearLayout&gt;</span>

<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre></div>
<h4 id="gestos">Gestos<a class="headerlink" href="#gestos" title="Permanent link">&para;</a></h4>
<p>En las aplicaciones <em>Google Glass</em> encontramos una serie de gestos estándar:</p>
<ul>
<li>El barrido lateral a la izquierda o la derecha nos permite movernos entre las diferentes tarjetas disponibles.</li>
<li>El barrido hacia abajo nos permite salir de la actividad actual.</li>
<li>El <em>tap</em> nos permite seleccionar la tarjeta actual.</li>
</ul>
<p>Podemos utilizar el objeto <code>GestureDetector</code> para reconocer los diferentes gestos disponibles:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MainActivity</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Activity</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">GestureDetector</span><span class="p">.</span><span class="na">BaseListener</span><span class="w"> </span><span class="n">mBaseListener</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GestureDetector</span><span class="p">.</span><span class="na">BaseListener</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">onGesture</span><span class="p">(</span><span class="n">Gesture</span><span class="w"> </span><span class="n">gesture</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gesture</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Gesture</span><span class="p">.</span><span class="na">TAP</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">mAudioManager</span><span class="p">.</span><span class="na">playSoundEffect</span><span class="p">(</span><span class="n">Sounds</span><span class="p">.</span><span class="na">TAP</span><span class="p">);</span>

<span class="w">                </span><span class="c1">// Realizar acción</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">AudioManager</span><span class="w"> </span><span class="n">mAudioManager</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">GestureDetector</span><span class="w"> </span><span class="n">mGestureDetector</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">(</span><span class="n">Bundle</span><span class="w"> </span><span class="n">savedInstanceState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<span class="w">        </span><span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">activity_main</span><span class="p">);</span>

<span class="w">        </span><span class="n">mAudioManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">AudioManager</span><span class="p">)</span><span class="w"> </span><span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="p">.</span><span class="na">AUDIO_SERVICE</span><span class="p">);</span>
<span class="w">        </span><span class="n">mGestureDetector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GestureDetector</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="na">setBaseListener</span><span class="p">(</span><span class="n">mBaseListener</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<h2 id="relojes">Relojes<a class="headerlink" href="#relojes" title="Permanent link">&para;</a></h2>
<p>Para el desarrollo de aplicaciones para este tipo de dispositivos utilizaremos Android 4.4W (versión para <em>wearables</em>), y la librería de soporte <em>v4</em> (o <em>v13</em>) que incluye soporte para <em>wearables</em>.</p>
<p>Las aplicaciones para <em>wearables</em> desarrolladas con esta versión de la API siempre deberán distribuirse dentro de una aplicación para dispositivos móviles. Durante el desarrollo podemos instalar la aplicación <em>wear</em> directamente en el dispositivo o emulador del <em>wearable</em>, pero cuando la distribuyamos siempre deberá instalarse como complemento de la aplicación móvil.</p>
<p><img alt="Dispositivos wear" src="imagenes/wear-devices.png" /></p>
<p>Entre los dispositivos soportados por esta API, encontramos relojes que tienen pantalla rectangular y también tenemos relojes con pantalla circular. Esto supondrá una dificultad ya que elementos que se ven correctamente en una pantalla cuadrada pueden aparecer cortados en una circular.</p>
<h3 id="creacion-del-emulador">Creación del emulador<a class="headerlink" href="#creacion-del-emulador" title="Permanent link">&para;</a></h3>
<p>Para crear un emulador de un dispositivos <em>wear</em> deberemos especificar los siguientes datos:</p>
<ul>
<li><strong>Target</strong>: <em>Android 4.4W</em></li>
<li><strong>Device</strong>: <em>Android Wear Round</em> o <em>Android Wear Square</em>, según si queremos emulador un reloj con pantalla rectangular o circular.</li>
</ul>
<p>Se podrá emparejar el emulador o dispositivo <em>wearable</em> con un dispositivo móvil, instalando en este último la aplicación <em>Android Wear</em>.</p>
<h3 id="creacion-de-un-proyecto">Creación de un proyecto<a class="headerlink" href="#creacion-de-un-proyecto" title="Permanent link">&para;</a></h3>
<p>Es recomendable utilizar Android Studio para la creación de proyectos <em>wear</em>, ya que está preparado para generar plantillas para este tipo de proyectos.</p>
<p><img alt="Creación del proyecto wear" src="imagenes/wear-studio-01.png" /></p>
<p>Al crear un proyecto se deberá crear la aplicación móvil y la aplicación <em>wear</em> adjunta. Tendremos que especificar:</p>
<ul>
<li>Para teléfono/tablet el SDK mínimo será la API 9 (2.3)</li>
<li>Para dispositivo <em>wear</em> el SDK mínimo será la API 20 (4.4W)</li>
</ul>
<p>Podremos crear una actividad inicial tanto para la aplicación móvil como para la aplicación <em>wear</em>. El entorno nos da la opción de crear una plantilla de una actividad <em>wear</em> vacía:</p>
<p><img alt="Creación de la actividad wear" src="imagenes/wear-studio-02.png" /></p>
<p>De la actividad <em>wear</em> se creará un <em>layout</em> general, y dos <em>layouts</em> alternativos según si el dispositivo es rectángular o circular:</p>
<p><img alt="Configuración de la actividad wear" src="imagenes/wear-studio-03.png" /></p>
<h3 id="comandos-de-voz">Comandos de voz<a class="headerlink" href="#comandos-de-voz" title="Permanent link">&para;</a></h3>
<p>Al igual que en el caso de <em>Glass</em>, podemos utilizar una serie de comandos de voz predefinidos para lanzar las aplicaciones. En este caso, con estos comandos el sistema lanzará un <em>intent</em> que nuestra aplicación puede capturar para ejecutarse cuando se produzca. Por ejemplo tenemos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;activity</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;MiTaxiActivity&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;intent-filter&gt;</span>
<span class="w">      </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;com.google.android.gms.actions.RESERVE_TAXI_RESERVATION&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/activity&gt;</span>
</code></pre></div>
<p>Cuando digamos <em>“Ok google, get me a taxi”</em> se producirá el <em>intent</em> <code>RESERVE_TAXI_RESERVATION</code> que lanzará la actividad anterior, al haber incluido dicha acción como <code>&lt;intent-filter&gt;</code>.</p>
<p>Podemos ver la lista completa de comandos de voz en:</p>
<p>http://developer.android.com/training/wearables/apps/voice.html</p>
<p>Si ninguno de los comandos disponibles se adapta a nuestra aplicación, podemos lanzarla simplemente diciendo <em>“Ok google, start [nombre de la aplicación]”</em>. Para ello definiremos en la actividad principal una etiqueta <code>android:label</code> en la que indicaremos el nombre que deberemos pronunciar para ejecutar nuestra aplicación:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;application&gt;</span>
<span class="w">  </span><span class="nt">&lt;activity</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;MainActivity&quot;</span><span class="w"> </span><span class="na">android:label=</span><span class="s">&quot;Vision&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;intent-filter&gt;</span>
<span class="w">          </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;android.intent.action.MAIN&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;category</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;android.intent.category.LAUNCHER&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/intent-filter&gt;</span>
<span class="w">  </span><span class="nt">&lt;/activity&gt;</span>
<span class="nt">&lt;/application&gt;</span>
</code></pre></div>
<p>En esta caso anterior la aplicación se ejecutará cuando digamos <em>“Ok google, start Vision”</em>.</p>
<p>Dentro de nuestras actividades también podremos utilizar el sistema de reconocimiento del habla de Android para poder manejarlas mediante voz.</p>
<h3 id="interfaz-de-usuario">Interfaz de usuario<a class="headerlink" href="#interfaz-de-usuario" title="Permanent link">&para;</a></h3>
<p>Como hemos comentado anteriormente, la existencia de relojes circulares y rectángulares puede ser una complicación a la hora de diseñar la interfaz de nuestras aplicaciones <em>wear</em>. Existen dos enfoques para hacer que las aplicaciones se adapten correctamente a cada forma:</p>
<ul>
<li>Utilizar <em>layouts</em> alternativos para cada tipo de dispositivo</li>
<li>Utilizar un <em>layout</em> que adapte de forma automática los márgenes</li>
</ul>
<h4 id="layouts-alternativos">Layouts alternativos<a class="headerlink" href="#layouts-alternativos" title="Permanent link">&para;</a></h4>
<p>Una posible solución consiste en especificar diferentes <em>layouts</em> según si tenemos pantallas rectangulares o circulares. Para ello utilizamos un elemento <code>WatchViewStub</code> en el <em>layout</em>, en el cual especificamos dos <em>layouts</em> alternativos según el tipo de forma del dispositivo:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;android.support.wearable.view.WatchViewStub</span>
<span class="w">    </span><span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="na">xmlns:app=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
<span class="w">    </span><span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
<span class="w">    </span><span class="na">android:id=</span><span class="s">&quot;@+id/watch_view_stub&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">app:rectLayout=</span><span class="s">&quot;@layout/rect_activity_mi_actividad_wear&quot;</span>
<span class="w">    </span><span class="na">app:roundLayout=</span><span class="s">&quot;@layout/round_activity_mi_actividad_wear&quot;</span>
<span class="w">    </span><span class="na">tools:context=</span><span class="s">&quot;.MiActividadWear&quot;</span>
<span class="w">    </span><span class="na">tools:deviceIds=</span><span class="s">&quot;wear&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/android.support.wearable.view.WatchViewStub&gt;</span>
</code></pre></div>
<p>Por ejemplo, el <em>layout</em> para dispositivos rectangulares podría ser como el siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
<span class="w">    </span><span class="na">tools:context=</span><span class="s">&quot;.MiActividadWear&quot;</span>
<span class="w">    </span><span class="na">tools:deviceIds=</span><span class="s">&quot;wear_square&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;TextView</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/text&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:text=</span><span class="s">&quot;@string/hello_square&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div>
<p><img alt="Layout rectangular" src="imagenes/wear-rect.png" /></p>
<p>Por otro lado, para dispositivos circulares podríamos tener:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;RelativeLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">tools:context=</span><span class="s">&quot;.MiActividadWear&quot;</span>
<span class="w">    </span><span class="na">tools:deviceIds=</span><span class="s">&quot;wear_round&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;TextView</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/text&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">        </span><span class="na">android:layout_centerHorizontal=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">android:layout_centerVertical=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">android:text=</span><span class="s">&quot;@string/hello_round&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre></div>
<p><img alt="Layout rectangular" src="imagenes/wear-round.png" /></p>
<h4 id="adaptacion-automatica-de-los-margenes">Adaptación automática de los márgenes<a class="headerlink" href="#adaptacion-automatica-de-los-margenes" title="Permanent link">&para;</a></h4>
<p>Contamos con el <em>layout</em> <code>BoxInsetLayout</code> que permite adaptar la interfaz a ambos tipos de pantallas:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;android.support.wearable.view.BoxInsetLayout</span>
<span class="w">    </span><span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="na">xmlns:app=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
<span class="w">    </span><span class="na">android:background=</span><span class="s">&quot;@drawable/fondo&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:padding=</span><span class="s">&quot;15dp&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;FrameLayout</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/frame_layout&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">        </span><span class="na">android:padding=</span><span class="s">&quot;5dp&quot;</span>
<span class="w">        </span><span class="na">app:layout_box=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- Introducir contenido del layout --&gt;</span>

<span class="w">    </span><span class="nt">&lt;/FrameLayout&gt;</span>
<span class="nt">&lt;/android.support.wearable.view.BoxInsetLayout&gt;</span>
</code></pre></div>
<p>Este <em>layout</em> permitirá ajustar los márgenes de su contenido de forma que queden dentro del espacio de la pantalla. Con el atributo <code>app:layout_box="all"</code> haremos que el marco del <em>layout</em> quede dentro de todos los límites (superior, inferior, derecho e izquierdo) de la pantalla del reloj.</p>
<blockquote>
<p>En Android 4.4W2 existe un <em>bug</em> que cause que <code>BoxInsetLayout</code> no funcione correctamente en dispositivos redondos.</p>
</blockquote>
<h4 id="tarjetas_1">Tarjetas<a class="headerlink" href="#tarjetas_1" title="Permanent link">&para;</a></h4>
<p>Podemos añadir tarjetas a un <em>layout</em> como el anterior con las clase <code>CardFragment</code>. Las tarjetas creadas con esta clase tendrán un título, descripción e icono.</p>
<div class="highlight"><pre><span></span><code><span class="n">FragmentManager</span><span class="w"> </span><span class="n">fragmentManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getFragmentManager</span><span class="p">();</span>
<span class="n">FragmentTransaction</span><span class="w"> </span><span class="n">fragmentTransaction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fragmentManager</span><span class="p">.</span><span class="na">beginTransaction</span><span class="p">();</span>
<span class="n">CardFragment</span><span class="w"> </span><span class="n">cardFragment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CardFragment</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="s">&quot;Titulo&quot;</span><span class="p">,</span>
<span class="w">                                                </span><span class="s">&quot;Descripcion&quot;</span><span class="p">,</span>
<span class="w">                                                </span><span class="n">R</span><span class="p">.</span><span class="na">drawable</span><span class="p">.</span><span class="na">icono</span><span class="p">);</span>
<span class="n">fragmentTransaction</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">id</span><span class="p">.</span><span class="na">frame_layout</span><span class="p">,</span><span class="w"> </span><span class="n">cardFragment</span><span class="p">);</span>
<span class="n">fragmentTransaction</span><span class="p">.</span><span class="na">commit</span><span class="p">();</span>
</code></pre></div>
<p>Con <code>CardFrame</code> podemos añadir la tarjeta directamente en el <em>layout</em> XML. Podemos también introducir esta tarjeta en un cuadro con <em>scroll</em>, utilizando el elemento <code>CardScrollView</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;android.support.wearable.view.BoxInsetLayout</span>
<span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="na">xmlns:app=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
<span class="na">android:background=</span><span class="s">&quot;#aaf&quot;</span>
<span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;android.support.wearable.view.CardScrollView</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">&quot;@+id/card_scroll_view&quot;</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">        </span><span class="na">app:layout_box=</span><span class="s">&quot;bottom&quot;</span><span class="nt">&gt;</span>

<span class="w">        </span><span class="nt">&lt;android.support.wearable.view.CardFrame</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span><span class="nt">&gt;</span>

<span class="w">            </span><span class="nt">&lt;LinearLayout</span>
<span class="w">                </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">                </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">                </span><span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
<span class="w">                </span><span class="na">android:paddingLeft=</span><span class="s">&quot;5dp&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;TextView</span>
<span class="w">                    </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">                    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">                    </span><span class="na">android:text=</span><span class="s">&quot;Titulo&quot;</span>
<span class="w">                    </span><span class="na">android:textColor=</span><span class="s">&quot;@color/black&quot;</span>
<span class="w">                    </span><span class="na">android:textSize=</span><span class="s">&quot;20sp&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;TextView</span>
<span class="w">                    </span><span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
<span class="w">                    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">                    </span><span class="na">android:text=</span><span class="s">&quot;Descripción&quot;</span>
<span class="w">                    </span><span class="na">android:textColor=</span><span class="s">&quot;@color/black&quot;</span>
<span class="w">                    </span><span class="na">android:textSize=</span><span class="s">&quot;14sp&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/LinearLayout&gt;</span>
<span class="w">        </span><span class="nt">&lt;/android.support.wearable.view.CardFrame&gt;</span>
<span class="w">    </span><span class="nt">&lt;/android.support.wearable.view.CardScrollView&gt;</span>
<span class="nt">&lt;/android.support.wearable.view.BoxInsetLayout&gt;</span>
</code></pre></div>
<h4 id="listas">Listas<a class="headerlink" href="#listas" title="Permanent link">&para;</a></h4>
<p>Para introducir una lista utilizaremos la vista <code>WearableListView</code>. Al igual que en el caso de <code>ListView</code> será necesario crear un <em>layout</em> para los <em>items</em> (que implementará <code>WearableListView.Item</code>), y un adaptador (de tipo <code>WearableListView.Adapter</code>) para poblar la lista.</p>
<p>También tenemos <code>GridViewPager</code> para crear un selector 2D.</p>
<h4 id="pantallas-de-confirmacion">Pantallas de confirmación<a class="headerlink" href="#pantallas-de-confirmacion" title="Permanent link">&para;</a></h4>
<p>Contamos con actividad <code>ConfirmationActivity</code> que podemos utilizar para mostrar confirmaciones de alguna acción que se ha desarrollado. Esta será la forma estándar de mostrar confirmaciones en este tipo de dispositivos. Para poder utilizar esta actividad deberemos declararla en el <em>manifest</em>, aunque no la tengamos que crear nosotros:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;activity</span>
<span class="w">    </span><span class="na">android:name=</span><span class="s">&quot;android.support.wearable.activity.ConfirmationActivity&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/activity&gt;</span>
</code></pre></div>
<p>Una vez declarada, podremos lanzarla mediante un <em>intent</em>:</p>
<div class="highlight"><pre><span></span><code><span class="n">Intent</span><span class="w"> </span><span class="n">intent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">ConfirmationActivity</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">intent</span><span class="p">.</span><span class="na">putExtra</span><span class="p">(</span><span class="n">ConfirmationActivity</span><span class="p">.</span><span class="na">EXTRA_ANIMATION_TYPE</span><span class="p">,</span>
<span class="w">                </span><span class="n">ConfirmationActivity</span><span class="p">.</span><span class="na">SUCCESS_ANIMATION</span><span class="p">);</span>
<span class="n">intent</span><span class="p">.</span><span class="na">putExtra</span><span class="p">(</span><span class="n">ConfirmationActivity</span><span class="p">.</span><span class="na">EXTRA_MESSAGE</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;Enviado&quot;</span><span class="p">);</span>
<span class="n">startActivity</span><span class="p">(</span><span class="n">intent</span><span class="p">);</span>
</code></pre></div>
<p>También podemos la vista <code>DelayedConfirmationView</code> para dar al usuario un tiempo para cancelar la acción antes de que se confirme.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="assets/javascripts/bundle.b78d2936.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>